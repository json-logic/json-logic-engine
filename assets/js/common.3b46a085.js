"use strict";(self.webpackChunkjson_logic_engine_documentation=self.webpackChunkjson_logic_engine_documentation||[]).push([[76],{9126:(e,t,n)=>{n.d(t,{A:()=>Xe});var r=n(6540);async function i(e,t){const n=[];let r=0;for(const i of e)n.push(await t(i,r++,e));return n}const o={filter:async function(e,t){const n=[];let r=0;for(const i of e)await t(i,r++,e)&&n.push(i);return n},some:async function(e,t){let n=0;for(const r of e)if(await t(r,n++,e))return!0;return!1},every:async function(e,t){let n=0;for(const r of e)if(!await t(r,n++,e))return!1;return!0},map:i,reduce:async function(e,t,n){if(0===e.length){if(void 0!==n)return n;throw new Error("Array has no elements.")}const r=void 0===n?1:0;let i=r?e[0]:n;for(let o=r;o<e.length;o++)i=await t(i,e[o]);return i}},s=Symbol.for("json_logic_sync"),a=Symbol.for("json_logic_compiled"),l=Symbol.for("json_logic_original"),u=Symbol.for("json_logic_unfound");function c(e){return"function"==typeof e?!0===e[s]:Array.isArray(e)?e.every(c):!(e&&e.asyncMethod&&!e.method)}function h(e,t=!0){return e[s]=t,e}function m(e){return Array.isArray(e)?e:[e]}const d=new WeakMap;function f(e){return e&&"function"==typeof e&&e.length?(d.has(e)||d.set(e,function(e){if(!e||"function"!=typeof e||!e.length)return 0;let t=e.toString();if("("!==t[0]&&"f"!==t[0])return 0;t=t.substring(t.indexOf("("),t.indexOf("{")).replace(/=>/g,"");return/\.{3}|=/.test(t)?0:e.length}(e)),d.get(e)):0}function p(e){if(Number.isNaN(e))throw NaN;if(!e)return e;if("object"==typeof e)throw NaN;return e}function y(e,t){if(!Array.isArray(e)||e.length<t)throw{type:"Invalid Arguments"};return e}function g(e,...t){let n="";const r=this;for(let i=0;i<e.length;i++)n+=e[i],i<t.length&&("function"==typeof t[i]?(this.methods.push(t[i]),c(t[i])||(r.asyncDetected=!0),n+=(c(t[i])?"":" await ")+"methods["+(r.methods.length-1)+"]"):t[i]&&void 0!==t[i][a]?n+=t[i][a]:n+=A(t[i],r));return{[a]:n}}function b(e,t,n){if(Array.isArray(e))return e.every((e=>b(e,t,n)));if(e&&"object"==typeof e){const r=Object.keys(e)[0],i=e[r];if(t.isData(e,r))return!0;if(void 0===i)return!0;if(!t.methods[r])throw new Error(`Method '${r}' was not found in the Logic Engine.`);return t.methods[r].lazy?"function"==typeof t.methods[r].deterministic?t.methods[r].deterministic(i,n):t.methods[r].deterministic:"function"==typeof t.methods[r].deterministic?t.methods[r].deterministic(i,n):t.methods[r].deterministic&&b(i,t,n)}return!0}function T(e,t){if(!t.async)return!0;if(Array.isArray(e))return e.every((e=>T(e,t)));if(e&&"object"==typeof e){const n=Object.keys(e);if(0===n.length)return!0;const r=n[0],i=e[r];return!!c(t.methods[r])&&(t.methods[r].lazy?!("function"!=typeof t.methods[r][s]||!t.methods[r][s](e,{engine:t})):T(i,t))}return!0}function A(e,t={}){const{notTraversed:n=[],async:r,processing:i=[],values:o=[],engine:l}=t;function u(e,t=!1){return function(e,t){return("number"!=typeof e||e!==1/0&&e!==-1/0&&!Number.isNaN(e))&&(null==e||["Number","String","Boolean"].includes(e.constructor.name)||!t&&"Object"===e.constructor.name)}(e,t)?JSON.stringify(e):(o.push(e),`values[${o.length-1}]`)}if(Array.isArray(e)){let n="";for(let r=0;r<e.length;r++)r>0&&(n+=","),n+=A(e[r],t);return"["+n+"]"}let h=!1;function m(e){return t.asyncDetected=t.asyncDetected||h,r&&h?`await ${e}`:e}const d=e&&Object.keys(e)[0];if(e&&"object"==typeof e){if(!d)return u(e);if(!l.methods[d]){if(l.isData(e,d))return u(e,!0);throw new Error(`Method '${d}' was not found in the Logic Engine.`)}if(!t.engine.disableInline&&l.methods[d]&&b(e,l,t))return T(e,l)?u((l.fallback||l).run(e),!0):t.avoidInlineAsync?(t.asyncDetected=!0,`(await ${u(l.run(e))})`):(i.push(l.run(e).then((e=>u(e)))),`__%%%${i.length-1}%%%__`);let o=e[d];if(o&&"object"==typeof o||l.methods[d].lazy||(o=[o]),l.methods[d]&&l.methods[d].compile){let e=l.methods[d].compile(o,t);if(e[a]&&(e=e[a]),(e||"").startsWith("await")&&(t.asyncDetected=!0),!1!==e)return e}let p=l.methods[d].optimizeUnary?"":"coerceArray";p||!Array.isArray(o)||1!==o.length||Array.isArray(o[0])?p&&Array.isArray(o)&&(p=""):o=o[0];const y=[", context",", context, above",", context, above, engine"];if("function"==typeof l.methods[d]){h=!c(l.methods[d]);const e=y[f(l.methods[d])-1]||y[2];return m(`engine.methods["${d}"](${p}(`+A(o,t)+")"+e+")")}{h=Boolean(r&&l.methods[d]&&l.methods[d].asyncMethod);let e=y[f(h?l.methods[d].asyncMethod:l.methods[d].method)-1]||y[2];return h&&"function"==typeof l.methods[d][s]&&l.methods[d][s](o,{engine:l})&&(h=!1,e=e.replace("engine","engine.fallback")),l.methods[d]&&!l.methods[d].lazy?m(`engine.methods["${d}"]${h?".asyncMethod":".method"}(${p}(`+A(o,t)+")"+e+")"):(n.push(o),m(`engine.methods["${d}"]${h?".asyncMethod":".method"}(notTraversed[${n.length-1}]`+e+")"))}}return u(e)}function C(e,t={}){Object.assign(t,Object.assign({notTraversed:[],methods:[],state:{},processing:[],async:t.engine.async,asyncDetected:!1,values:[],compile:g},t));return w(e,A(e,t),t)}function w(e,t,n){const{engine:r,methods:i,notTraversed:a,processing:l=[],values:u}=n;l.forEach(((e,n)=>{t=t.replace(`__%%%${n}%%%__`,e)}));const c=`(values, methods, notTraversed, asyncIterators, engine, above, coerceArray, precoerceNumber, assertSize) => ${n.asyncDetected?"async":""} (context ${n.extraArguments?","+n.extraArguments:""}) => { ${t.includes("prev")?"let prev;":""} const result = ${t}; return result }`;return Object.assign(("undefined"!=typeof globalThis?globalThis:global).eval(c)(u,i,a,o,r,[],m,p,y),{[s]:!n.asyncDetected,aboveDetected:"string"==typeof t&&t.includes(", above")})}const v=(()=>{try{const e={};return void 0===("undefined"!=typeof globalThis?globalThis:global).eval("(test) => test?.foo?.bar")(e)}catch(e){return!1}})();class L extends Error{constructor(e){super(),this.message="Built-in control structures are not allowed to receive dynamic inputs, this could allow a lesser version of remote-code execution.",this.input=e}}const _=new Map;function P(e){if(_.has(e))return _.get(e);_.size>2048&&_.clear();const t=N(e);return _.set(e,t),t}function N(e,t=".",n="\\",r="/"){const i=[];let o="";for(let s=0;s<e.length;s++){const a=e[s];a===n?e[s+1]===t||e[s+1]===r?(o+=e[s+1],s++):e[s+1]===n?(o+=n,s++):o+=n:a===t?(i.push(o),o=""):o+=a}return i.length!==e.length&&i.push(o),i}const x={get:{[s]:!0,method:([e,t,n],r,i,o)=>{const s=void 0===n?null:n,a=P(String(t));for(let l=0;l<a.length;l++){if(null==e)return s;if(void 0===(e=e[a[l]]))return s}return o.allowFunctions||"function"!=typeof e[t]?e:null},deterministic:!0,compile:(e,t)=>{let n=null,r=e,i=null;if(Array.isArray(e)&&e.length<=3){if(i=e[0],r=e[1],n=void 0===e[2]?null:e[2],r&&"object"==typeof r)return!1;r=r.toString();const o=P(r);return v?`((${A(i,t)})${o.map((e=>`?.[${A(e,t)}]`)).join("")} ?? ${A(n,t)})`:`(((a,b) => (typeof a === 'undefined' || a === null) ? b : a)(${o.reduce(((e,t)=>`(${e}||0)[${JSON.stringify(t)}]`),`(${A(i,t)}||0)`)}, ${A(n,t)}))`}return!1}},var:{[l]:!0,[s]:!0,method:(e,t,n,r)=>{let i;Array.isArray(e)&&(i=e[1],e=e[0]);let o=0;for(;"string"==typeof e&&e.startsWith("../")&&o<n.length;)t=n[o++],e=e.substring(3),o===n.length&&Array.isArray(t)&&(o=0,t=(n=t)[o++]);const s=void 0===i?null:i;if(void 0===e||""===e||null===e)return r.allowFunctions||"function"!=typeof t?t:null;const a=P(String(e));for(let l=0;l<a.length;l++){if(null==t)return s;if(void 0===(t=t[a[l]]))return s}return r.allowFunctions||"function"!=typeof t?t:null},deterministic:(e,t)=>t.insideIterator&&!String(e).includes("../../"),optimizeUnary:!0,compile:(e,t)=>{let n=e,r=null;if(!n||"string"==typeof e||"number"==typeof e||Array.isArray(e)&&e.length<=2){if(Array.isArray(e)&&(n=e[0],r=void 0===e[1]?null:e[1]),"../index"===n&&t.iteratorCompile)return"index";if(null==n||""===n)return"context";if("string"!=typeof n&&"number"!=typeof n)return!1;if(n=n.toString(),n.includes("../"))return!1;const i=P(n);if(!v){const e=`((((a,b) => (typeof a === 'undefined' || a === null) ? b : a)(${i.reduce(((e,t)=>`(${e}||0)[${JSON.stringify(t)}]`),"(context||0)")}, ${A(r,t)})))`;return t.engine.allowFunctions?e:`(typeof (prev = ${e}) === 'function' ? null : prev)`}const o=`(context${i.map((e=>`?.[${JSON.stringify(e)}]`)).join("")} ?? ${A(r,t)})`;return t.engine.allowFunctions?o:`(typeof (prev = ${o}) === 'function' ? null : prev)`}return!1}},missing:{[s]:!0,optimizeUnary:!1,method:(e,t)=>{if(!e.length)return[];const n=[];for(let r=0;r<e.length;r++){const i=P(String(e[r]));let o=t,s=!0;for(let e=0;e<i.length;e++){if(!o){s=!1;break}if(o=o[i[e]],void 0===o){s=!1;break}}s||n.push(e[r])}return n},compile:(e,t)=>!!Array.isArray(e)&&(0===e.length?t.compile`[]`:1!==e.length||"string"!=typeof e[0]||e[0].includes(".")?2===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&!e[0].includes(".")&&!e[1].includes(".")&&t.compile`(context || 0)[${e[0]}] === undefined ? (context || 0)[${e[1]}] === undefined ? [${e[0]}, ${e[1]}] : [${e[0]}] : (context || 0)[${e[1]}] === undefined ? [${e[1]}] : []`:t.compile`(context || 0)[${e[0]}] === undefined ? [${e[0]}] : []`),deterministic:(e,t)=>!(!Array.isArray(e)||0!==e.length)},missing_some:{[s]:!0,optimizeUnary:!1,method:([e,t],n)=>{const r=x.missing.method(t,n);return t.length-r.length>=e?[]:r},compile:([e,t],n)=>{if(!Array.isArray(t))return!1;let r=x.missing.compile(t,n);return r||(r=n.compile`engine.methods.missing.method(${{[a]:JSON.stringify(t)}}, context)`),n.compile`${t.length} - (prev = ${r}).length < ${e} ? prev : []`},deterministic:!1}},S={...x},k={type:"Invalid Arguments"};function O(e,t,n){if(Array.isArray(e))return e.every((e=>O(e,t,n)));if(e&&"object"==typeof e){const r=Object.keys(e)[0],i=e[r];if(t.isData(e,r))return!0;if(!t.methods[r])throw new Error(`Method '${r}' was not found in the Logic Engine.`);return t.methods[r].lazy?"function"==typeof t.methods[r].deterministic?t.methods[r].deterministic(i,n):t.methods[r].deterministic:"function"==typeof t.methods[r].deterministic?t.methods[r].deterministic(i,n):t.methods[r].deterministic&&O(i,t,n)}return!0}function I(e,t,n){if(Array.isArray(e))return e.every((e=>I(e,t,n)));if(e&&"object"==typeof e){const r=Object.keys(e)[0],i=e[r];if(t.isData(e,r))return!0;if(!t.methods[r])throw new Error(`Method '${r}' was not found in the Logic Engine.`);return t.methods[r].lazy?"function"==typeof t.methods[r][s]?t.methods[r][s](i,n):t.methods[r][s]:"function"==typeof t.methods[r][s]?t.methods[r][s](i,n):t.methods[r][s]&&I(i,t,n)}return!0}function E(e,t,n,r){if(!e)return e;if("object"!=typeof e)return e;if(!t.disableInterpretedOptimization&&t.optimizedMap.has(e)){const i=t.optimizedMap.get(e);return"function"==typeof i?i(n,r):i}return t.run(e,n,{above:r})}const j=$("every",!0),M={"+":e=>{if(!e)return 0;if("string"==typeof e)return p(+e);if("number"==typeof e)return p(+e);if("boolean"==typeof e)return p(+e);if("object"==typeof e&&!Array.isArray(e))throw NaN;let t=0;for(let n=0;n<e.length;n++){if(e[n]&&"object"==typeof e[n])throw NaN;t+=+e[n]}if(Number.isNaN(t))throw NaN;return t},"*":e=>{if(0===e.length)return 1;let t=1;for(let n=0;n<e.length;n++){if(e[n]&&"object"==typeof e[n])throw NaN;t*=+e[n]}if(Number.isNaN(t))throw NaN;return t},"/":e=>{if(e[0]&&"object"==typeof e[0])throw NaN;if(0===e.length)throw k;if(1===e.length){if(!+e[0]||e[0]&&"object"==typeof e[0])throw NaN;return 1/+e[0]}let t=+e[0];for(let n=1;n<e.length;n++){if(e[n]&&"object"==typeof e[n]||!e[n])throw NaN;t/=+e[n]}if(Number.isNaN(t)||t===1/0)throw NaN;return t},"-":e=>{if(!e)return 0;if("string"==typeof e)return p(-e);if("number"==typeof e)return p(-e);if("boolean"==typeof e)return p(-e);if("object"==typeof e&&!Array.isArray(e))throw NaN;if(e[0]&&"object"==typeof e[0])throw NaN;if(0===e.length)throw k;if(1===e.length)return-e[0];let t=e[0];for(let n=1;n<e.length;n++){if(e[n]&&"object"==typeof e[n])throw NaN;t-=+e[n]}if(Number.isNaN(t))throw NaN;return t},"%":e=>{if(e[0]&&"object"==typeof e[0])throw NaN;if(e.length<2)throw k;let t=+e[0];for(let n=1;n<e.length;n++){if(e[n]&&"object"==typeof e[n])throw NaN;t%=+e[n]}if(Number.isNaN(t))throw NaN;return t},throw:e=>{if(Array.isArray(e)&&(e=e[0]),"object"==typeof e)throw e;throw{type:e}},max:e=>Math.max(...e),min:e=>Math.min(...e),in:([e,t])=>(t||[]).includes(e),preserve:{lazy:!0,method:h((e=>e),!0),[s]:()=>!0},if:{method:(e,t,n,r)=>{if(!Array.isArray(e))throw new L(e);if(1===e.length)return E(e[0],r,t,n);if(e.length<2)return null;(e=[...e]).length%2!=1&&e.push(null);const i=e.pop();for(;e.length;){const i=e.shift(),o=e.shift(),s=E(i,r,t,n);if(r.truthy(s))return E(o,r,t,n)}return E(i,r,t,n)},[s]:(e,t)=>I(e,t.engine,t),deterministic:(e,t)=>O(e,t.engine,t),asyncMethod:async(e,t,n,r)=>{if(!Array.isArray(e))throw new L(e);if(1===e.length)return r.run(e[0],t,{above:n});if(e.length<2)return null;(e=[...e]).length%2!=1&&e.push(null);const i=e.pop();for(;e.length;){const i=e.shift(),o=e.shift(),s=await r.run(i,t,{above:n});if(r.truthy(s))return r.run(o,t,{above:n})}return r.run(i,t,{above:n})},lazy:!0},"<":e=>{if(2===e.length)return e[0]<e[1];for(let t=1;t<e.length;t++)if(e[t-1]>=e[t])return!1;return!0},"<=":e=>{if(2===e.length)return e[0]<=e[1];for(let t=1;t<e.length;t++)if(e[t-1]>e[t])return!1;return!0},">":e=>{if(2===e.length)return e[0]>e[1];for(let t=1;t<e.length;t++)if(e[t-1]<=e[t])return!1;return!0},">=":e=>{if(2===e.length)return e[0]>=e[1];for(let t=1;t<e.length;t++)if(e[t-1]<e[t])return!1;return!0},"==":e=>{if(2===e.length)return e[0]==e[1];for(let t=1;t<e.length;t++)if(e[t-1]!=e[t])return!1;return!0},"===":e=>{if(2===e.length)return e[0]===e[1];for(let t=1;t<e.length;t++)if(e[t-1]!==e[t])return!1;return!0},"!=":e=>{if(2===e.length)return e[0]!=e[1];for(let t=1;t<e.length;t++)if(e[t-1]==e[t])return!1;return!0},"!==":e=>{if(2===e.length)return e[0]!==e[1];for(let t=1;t<e.length;t++)if(e[t-1]===e[t])return!1;return!0},or:{[s]:(e,t)=>I(e,t.engine,t),method:(e,t,n,r)=>{const i=Array.isArray(e);let o;i||(e=E(e,r,t,n));for(let s=0;s<e.length;s++)if(o=i?E(e[s],r,t,n):e[s],r.truthy(o))return o;return o},asyncMethod:async(e,t,n,r)=>{const i=Array.isArray(e);let o;i||(e=await r.run(e,t,{above:n}));for(let s=0;s<e.length;s++)if(o=i?await r.run(e[s],t,{above:n}):e[s],r.truthy(o))return o;return o},deterministic:(e,t)=>O(e,t.engine,t),compile:(e,t)=>{let n=t.compile``;if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r++)n=t.compile`${n} engine.truthy(prev = ${e[r]}) ? prev : `;return n=t.compile`${n} prev`,n}return!1},lazy:!0},"??":{[s]:(e,t)=>I(e,t.engine,t),method:(e,t,n,r)=>{const i=Array.isArray(e);let o;i||(e=E(e,r,t,n));for(let s=0;s<e.length;s++)if(o=i?E(e[s],r,t,n):e[s],null!=o)return o;return void 0===o?null:o},asyncMethod:async(e,t,n,r)=>{const i=Array.isArray(e);let o;i||(e=await r.run(e,t,{above:n}));for(let s=0;s<e.length;s++)if(o=i?await r.run(e[s],t,{above:n}):e[s],null!=o)return o;return void 0===o?null:o},deterministic:(e,t)=>O(e,t.engine,t),compile:(e,t)=>!!v&&(Array.isArray(e)&&e.length?`(${e.map(((n,r)=>{const i=A(n,t);return Array.isArray(n)||!n||"object"!=typeof n||r===e.length-1?i:"("+i+")"})).join(" ?? ")})`:`(${A(e,t)}).reduce((a,b) => (a) ?? b, null)`),lazy:!0},try:{[s]:(e,t)=>I(e,t.engine,t),method:(e,t,n,r)=>{const i=Array.isArray(e);let o,s;i||(e=E(e,r,t,n));for(let l=0;l<e.length;l++)try{return o=s?E(e[l],r,{type:s.type||s.error||s.message||s.constructor.name},[null,t,n]):i?E(e[l],r,t,n):e[l],o}catch(a){s=Number.isNaN(a)?{message:"NaN"}:a}throw s},asyncMethod:async(e,t,n,r)=>{const i=Array.isArray(e);let o,s;i||(e=await r.run(e,t,{above:n}));for(let l=0;l<e.length;l++)try{return o=s?await r.run(e[l],{type:s.type||s.error||s.message||s.constructor.name},{above:[null,t,n]}):i?await r.run(e[l],t,{above:n}):e[l],o}catch(a){s=Number.isNaN(a)?{message:"NaN"}:a}throw s},deterministic:(e,t)=>O(e[0],t.engine,{...t,insideTry:!0})&&O(e,t.engine,{...t,insideIterator:!0,insideTry:!0}),lazy:!0,compile:(e,t)=>{if(!Array.isArray(e)||!e.length)return!1;let n;try{n=t.compile`((context, above) => { try { return ${e[0]} } catch(err) { above = [null, context, above]; context = { type: err.type || err.message || err.toString() }; `}catch(r){Number.isNaN(r)&&(r={type:"NaN"}),n={[a]:`((context, above) => { { above = [null, context, above]; context = ${JSON.stringify(r)}; `}}if(e.length>1)for(let i=1;i<e.length;i++)try{n=i===e.length-1?t.compile`${n} try { return ${e[i]} } catch(err) { throw err; } `:t.compile`${n} try { return ${e[i]} } catch(err) { context = { type: err.type || err.message || err.toString() }; } `}catch(r){Number.isNaN(r)&&(r={type:"NaN"}),n=i===e.length-1?t.compile`${n} throw ${{[a]:JSON.stringify(r)}} `:t.compile`${n} ${{[a]:`context = ${JSON.stringify(r)};`}}`}else n=n[a].includes("err")?t.compile`${n} throw err;`:t.compile`${n} throw context;`;return n=t.compile`${n} } })(context, above)`,n[a].includes("await")&&(n[a]=n[a].replace("((context","(async (context")),n}},and:{[s]:(e,t)=>I(e,t.engine,t),method:(e,t,n,r)=>{const i=Array.isArray(e);let o;i||(e=E(e,r,t,n));for(let s=0;s<e.length;s++)if(o=i?E(e[s],r,t,n):e[s],!r.truthy(o))return o;return o},asyncMethod:async(e,t,n,r)=>{const i=Array.isArray(e);let o;i||(e=await r.run(e,t,{above:n}));for(let s=0;s<e.length;s++)if(o=i?await r.run(e[s],t,{above:n}):e[s],!r.truthy(o))return o;return o},lazy:!0,deterministic:(e,t)=>O(e,t.engine,t),compile:(e,t)=>{let n=t.compile``;if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r++)n=t.compile`${n} !engine.truthy(prev = ${e[r]}) ? prev : `;return n=t.compile`${n} prev`,n}return!1}},substr:([e,t,n])=>{if(n<0){const r=e.substr(t);return r.substr(0,r.length+n)}return e.substr(t,n)},length:([e])=>"string"==typeof e||Array.isArray(e)?e.length:e&&"object"==typeof e?Object.keys(e).length:0,exists:{method:(e,t,n,r)=>M.val.method(e,t,n,r,u)!==u,deterministic:!1},val:{[l]:!0,[s]:!0,method:(e,t,n,r,i=null)=>{if(Array.isArray(e)&&1===e.length&&!Array.isArray(e[0])&&(e=e[0]),!Array.isArray(e)){if(i&&(!t||!(e in t)))return i;if(null==t)return null;const n=t[e];return void 0===n?null:n}let o=t,s=0;if(Array.isArray(e[0])&&1===e[0].length){s++;const t=+Math.abs(e[0][0]);let r=0;for(let e=0;e<t;e++)o=n[r++],e===n.length-1&&Array.isArray(o)&&(n=o,o=o[0],r=1)}for(let a=s;a<e.length;a++){if(i&&(!o||!(e[a]in o)))return i;if(null==o)return null;o=o[e[a]]}return void 0===o?i:"function"!=typeof o||r.allowFunctions?o:i},optimizeUnary:!0,deterministic:(e,t)=>!!t.insideIterator&&!(Array.isArray(e)&&Array.isArray(e[0])&&Math.abs(e[0][0])>=2),compile:(e,t)=>{function n(e){let n;return n=v?t.compile`(${e} ?? null)`:t.compile`(((a) => a === null || a === undefined ? null : a)(${e}))`,t.engine.allowFunctions||(n=t.compile`(typeof (prev = ${n}) === 'function' ? null : prev)`),n}if("object"==typeof e&&!Array.isArray(e)){if(!I(e,t.engine,t)||!O(e,t.engine,t)||t.engine.disableInline)return!1;e=(t.engine.fallback||t.engine).run(e,t.context,{above:t.above})}if(Array.isArray(e)&&Array.isArray(e[0]))return!(!t.iteratorCompile||1!==Math.abs(e[0][0]||0)||"index"!==e[1])&&t.compile`index`;if(Array.isArray(e)&&1===e.length&&(e=e[0]),null===e)return n(t.compile`context`);if(!Array.isArray(e))return n(v?t.compile`context?.[${e}]`:t.compile`(context || 0)[${e}]`);if(Array.isArray(e)){let r=t.compile`context`;for(let n=0;n<e.length;n++)null!==e[n]&&(r=v?t.compile`${r}?.[${e[n]}]`:t.compile`(${r}|| 0)[${e[n]}]`);return n(t.compile`(${r})`)}return!1}},map:$("map"),some:{...$("some",!0),method:(e,t,n,r)=>{if(!Array.isArray(e))throw new L(e);let[i,o]=e;i=E(i,r,t,n)||[];for(let s=0;s<i.length;s++)if(r.truthy(E(o,r,i[s],[i,t,n])))return!0;return!1}},all:{[s]:j[s],method:(e,t,n,r)=>{if(Array.isArray(e)){const i=E(e[0],r,t,n);if(Array.isArray(i)&&0===i.length)return!1}let[i,o]=e;i=E(i,r,t,n)||[];for(let s=0;s<i.length;s++)if(!r.truthy(E(o,r,i[s],[i,t,n])))return!1;return!0},asyncMethod:async(e,t,n,r)=>{if(Array.isArray(e)){const i=await r.run(e[0],t,n);if(Array.isArray(i)&&0===i.length)return!1}return j.asyncMethod(e,t,n,r)},compile:(e,t)=>!!Array.isArray(e)&&t.compile`Array.isArray(prev = ${e[0]}) && prev.length === 0 ? false : ${j.compile([{[a]:"prev"},e[1]],t)}`,deterministic:j.deterministic,lazy:j.lazy},none:{[s]:(e,t)=>I(e,t.engine,t),lazy:!0,method:(e,t,n,r)=>!M.some.method(e,t,n,r),asyncMethod:async(e,t,n,r)=>!await M.some.asyncMethod(e,t,n,r),compile:(e,t)=>{const n=M.some.compile(e,t);return!!n&&t.compile`!(${n})`}},merge:e=>{if(!Array.isArray(e))return[e];const t=[];for(let n=0;n<e.length;n++)if(Array.isArray(e[n]))for(let r=0;r<e[n].length;r++)t.push(e[n][r]);else t.push(e[n]);return t},filter:$("filter",!0),reduce:{deterministic:(e,t)=>O(e[0],t.engine,t)&&O(e[1],t.engine,{...t,insideIterator:!0}),compile:(e,t)=>{if(!Array.isArray(e))throw new L(e);const{async:n}=t;let[r,i,o]=e;r=A(r,t),void 0!==o&&(o=A(o,t));i=C(i,{...t,extraArguments:"above",avoidInlineAsync:!0});const s=i.aboveDetected?"[null, context, above]":"null";return t.methods.push(i),!n||c(i)&&!r.includes("await")?void 0!==o?`(${r} || []).reduce((a,b) => methods[${t.methods.length-1}]({ accumulator: a, current: b }, ${s}), ${o})`:`(${r} || []).reduce((a,b) => methods[${t.methods.length-1}]({ accumulator: a, current: b }, ${s}))`:(t.asyncDetected=!0,void 0!==o?`await asyncIterators.reduce(${r} || [], (a,b) => methods[${t.methods.length-1}]({ accumulator: a, current: b }, ${s}), ${o})`:`await asyncIterators.reduce(${r} || [], (a,b) => methods[${t.methods.length-1}]({ accumulator: a, current: b }, ${s}))`)},method:(e,t,n,r)=>{if(!Array.isArray(e))throw new L(e);let[i,o,s]=e;s=E(s,r,t,n),i=E(i,r,t,n)||[];let a=(e,s)=>r.run(o,{accumulator:e,current:s},{above:[i,t,n]});if(r.optimizedMap.has(o)&&"function"==typeof r.optimizedMap.get(o)){const e=r.optimizedMap.get(o);a=(r,o)=>e({accumulator:r,current:o},[i,t,n])}return void 0===s?i.reduce(a):i.reduce(a,s)},[s]:(e,t)=>I(e,t.engine,t),asyncMethod:async(e,t,n,r)=>{if(!Array.isArray(e))throw new L(e);let[i,s,a]=e;return a=await r.run(a,t,{above:n}),i=await r.run(i,t,{above:n})||[],o.reduce(i,((e,o)=>r.run(s,{accumulator:e,current:o},{above:[i,t,n]})),a)},lazy:!0},"!":(e,t,n,r)=>Array.isArray(e)?!r.truthy(e[0]):!r.truthy(e),"!!":(e,t,n,r)=>Boolean(Array.isArray(e)?r.truthy(e[0]):r.truthy(e)),cat:{[l]:!0,[s]:!0,method:e=>{if("string"==typeof e)return e;if(!Array.isArray(e))return e.toString();let t="";for(let n=0;n<e.length;n++)null!==e[n]&&void 0!==e[n]&&(t+=e[n]);return t},deterministic:!0,optimizeUnary:!0,compile:(e,t)=>{if("string"==typeof e)return JSON.stringify(e);if("number"==typeof e)return'"'+JSON.stringify(e)+'"';if(!Array.isArray(e))return!1;let n=t.compile`''`;for(let r=0;r<e.length;r++)n=t.compile`${n} + ${e[r]}`;return t.compile`(${n})`}},keys:([e])=>"object"==typeof e?Object.keys(e):[],pipe:{lazy:!0,[s]:(e,t)=>I(e,t.engine,t),method:(e,t,n,r)=>{if(!Array.isArray(e))throw new Error("Data for pipe must be an array");let i=r.run(e[0],t,{above:[e,t,n]});for(let o=1;o<e.length;o++)i=r.run(e[o],i,{above:[e,t,n]});return i},asyncMethod:async(e,t,n,r)=>{if(!Array.isArray(e))throw new Error("Data for pipe must be an array");let i=await r.run(e[0],t,{above:[e,t,n]});for(let o=1;o<e.length;o++)i=await r.run(e[o],i,{above:[e,t,n]});return i},compile:(e,t)=>{let n=t.compile`${e[0]}`;for(let r=1;r<e.length;r++)n=t.compile`${C(e[r],{...t,extraArguments:"above"})}(${n}, [null, context, above])`;return n},deterministic:(e,t)=>{if(!Array.isArray(e))return!1;return O((e=[...e]).shift(),t.engine,t)&&O(e,t.engine,{...t,insideIterator:!0})}},eachKey:{lazy:!0,[s]:(e,t)=>I(Object.values(e[Object.keys(e)[0]]),t.engine,t),method:(e,t,n,r)=>Object.keys(e).reduce(((i,o)=>{const s=e[o];return Object.defineProperty(i,o,{enumerable:!0,value:r.run(s,t,{above:n})}),i}),{}),deterministic:(e,t)=>{if(e&&"object"==typeof e)return Object.values(e).every((e=>O(e,t.engine,t)));throw new L(e)},compile:(e,t)=>{if(e&&"object"==typeof e){return`({ ${Object.keys(e).reduce(((n,r)=>(n.push(`${JSON.stringify(r)}: ${A(e[r],t)}`),n)),[]).join(",")} })`}throw new L(e)},asyncMethod:async(e,t,n,r)=>await o.reduce(Object.keys(e),(async(i,o)=>{const s=e[o];return Object.defineProperty(i,o,{enumerable:!0,value:await r.run(s,t,{above:n})}),i}),{})}};function $(e,t=!1){return{deterministic:(e,t)=>O(e[0],t.engine,t)&&O(e[1],t.engine,{...t,insideIterator:!0}),[s]:(e,t)=>I(e,t.engine,t),method:(n,r,i,o)=>{if(!Array.isArray(n))throw new L(n);let[s,a]=n;return s=E(s,o,r,i)||[],s[e](((e,n)=>{if(!a||"object"!=typeof a)return t?o.truthy(a):a;const l=E(a,o,e,[{iterator:s,index:n},r,i]);return t?o.truthy(l):l}))},asyncMethod:async(n,r,i,s)=>{if(!Array.isArray(n))throw new L(n);let[a,l]=n;return a=await s.run(a,r,{above:i})||[],o[e](a,(async(e,n)=>{if(!l||"object"!=typeof l)return t?s.truthy(l):l;const o=await s.run(l,e,{above:[{iterator:a,index:n},r,i]});return t?s.truthy(o):o}))},compile:(n,r)=>{if(!Array.isArray(n))throw new L(n);const{async:i}=r,[o,s]=n,a=C(s,{...r,avoidInlineAsync:!0,iteratorCompile:!0,extraArguments:"index, above"}),l=a.aboveDetected?r.compile`[{ iterator: z, index: x }, context, above]`:r.compile`null`,u=t?r.compile`engine.truthy`:r.compile``;return i&&!c(a)?(r.asyncDetected=!0,r.compile`await asyncIterators[${e}](${o} || [], async (i, x, z) => ${u}(${a}(i, x, ${l})))`):r.compile`(${o} || [])[${e}]((i, x, z) => ${u}(${a}(i, x, ${l})))`},lazy:!0}}M.every=M.all,M["?:"]=M.if,Object.keys(M).forEach((e=>{"function"==typeof M[e]&&(M[e][s]=!0),M[e].deterministic=void 0===M[e].deterministic||M[e].deterministic})),M.min.compile=function(e,t){return!!Array.isArray(e)&&`Math.min(${e.map((e=>A(e,t))).join(", ")})`},M.max.compile=function(e,t){return!!Array.isArray(e)&&`Math.max(${e.map((e=>A(e,t))).join(", ")})`};for(const Ye of[">","<",">=","<=","==","!=","!==","==="]){const e={[a]:Ye};M[Ye].compile=function(t,n){if(!Array.isArray(t))return!1;if(t.length<2)return!1;if(2===t.length)return n.compile`(${t[0]} ${e} ${t[1]})`;let r=n.compile`(${t[0]} ${e} (prev = ${t[1]}))`;for(let i=2;i<t.length;i++)r=n.compile`(${r} && prev ${e} ${t[i]})`;return r}}function F(e,t){if(Array.isArray(e))return p(NaN);if("number"==typeof e||"boolean"==typeof e)return"+"+A(e,t);if("string"==typeof e)return"+"+p(+e);const n=A(e,t);return/^-?\d+(\.\d*)?$/.test(n)?"+"+n:`(+precoerceNumber(${n}))`}M.if.compile=function(e,t){if(!Array.isArray(e))return!1;if(e.length<3)return!1;(e=[...e]).length%2!=1&&e.push(null);const n=e.pop();let r=t.compile``;for(;e.length;){const n=e.shift(),i=e.shift();r=t.compile`${r} engine.truthy(${n}) ? ${i} : `}return t.compile`(${r} ${n})`},M["+"].compile=function(e,t){return Array.isArray(e)?0===e.length?"(+0)":`precoerceNumber(${e.map((e=>F(e,t))).join(" + ")})`:"string"==typeof e||"number"==typeof e||"boolean"==typeof e?`precoerceNumber(+${A(e,t)})`:t.compile`(Array.isArray(prev = ${e}) ? prev.reduce((a,b) => (+a)+(+precoerceNumber(b)), 0) : +precoerceNumber(prev))`},M["%"].compile=function(e,t){if(Array.isArray(e)){if(e.length<2)throw k;return`precoerceNumber(${e.map((e=>F(e,t))).join(" % ")})`}return`assertSize(${A(e,t)}, 2).reduce((a,b) => (+precoerceNumber(a))%(+precoerceNumber(b)))`},M.in.compile=function(e,t){return!!Array.isArray(e)&&t.compile`(${e[1]} || []).includes(${e[0]})`},M["-"].compile=function(e,t){if(Array.isArray(e)){if(0===e.length)throw k;return`${1===e.length?"-":""}precoerceNumber(${e.map((e=>F(e,t))).join(" - ")})`}return"string"==typeof e||"number"==typeof e?`(-${A(e,t)})`:t.compile`(Array.isArray(prev = ${e}) ? prev.length === 1 ? -precoerceNumber(prev[0]) : assertSize(prev, 1).reduce((a,b) => (+precoerceNumber(a))-(+precoerceNumber(b))) : -precoerceNumber(prev))`},M["/"].compile=function(e,t){if(Array.isArray(e)){if(0===e.length)throw k;return 1===e.length&&(e=[1,e[0]]),`precoerceNumber(${e.map(((e,n)=>{let r=F(e,t);return n&&"+0"===r&&p(NaN),n&&(r=`precoerceNumber(${r} || NaN)`),r})).join(" / ")})`}return`assertSize(prev = ${A(e,t)}, 1) && prev.length === 1 ? 1 / precoerceNumber(prev[0] || NaN) : prev.reduce((a,b) => (+precoerceNumber(a))/(+precoerceNumber(b || NaN)))`},M["*"].compile=function(e,t){return Array.isArray(e)?0===e.length?"1":`precoerceNumber(${e.map((e=>F(e,t))).join(" * ")})`:`(${A(e,t)}).reduce((a,b) => (+precoerceNumber(a))*(+precoerceNumber(b)), 1)`},M["!"].compile=function(e,t){return Array.isArray(e)?t.compile`(!engine.truthy(${e[0]}))`:t.compile`(!engine.truthy(${e}))`},M.not=M["!"],M["!!"].compile=function(e,t){return Array.isArray(e)?t.compile`(!!engine.truthy(${e[0]}))`:t.compile`(!!engine.truthy(${e}))`},M.none.deterministic=M.some.deterministic,M.throw.deterministic=(e,t)=>t.insideTry&&O(e,t.engine,t),M["+"].optimizeUnary=M["-"].optimizeUnary=M["!"].optimizeUnary=M["!!"].optimizeUnary=M.cat.optimizeUnary=M.throw.optimizeUnary=!0;const D={...M,...S},B=function(e){return Object.keys(e).forEach((t=>{void 0===e[t]&&delete e[t]})),e};function J(e,t,n=[]){if(Array.isArray(e)){const r=e.map((e=>J(e,t,n)));return r.every((e=>"function"!=typeof e))?r:(e,t)=>r.map((n=>"function"==typeof n?n(e,t):n))}if(e&&"object"==typeof e){const r=function(e,t,n){if(e.val&&t.methods.val[l]&&Array.isArray(e.val)&&e.val.length<=3&&e.val.every((e=>"object"!=typeof e))){let n;if(1===e.val.length){const r=e.val[0];return e=>"function"==typeof(n=e&&e[r])&&!t.allowFunctions||void 0===n?null:n}if(2===e.val.length){const[r,i]=e.val;return e=>"function"==typeof(n=e&&e[r]&&e[r][i])&&!t.allowFunctions||void 0===n?null:n}if(3===e.val.length){const[r,i,o]=e.val;return e=>"function"==typeof(n=e&&e[r]&&e[r][i]&&e[r][i][o])&&!t.allowFunctions||void 0===n?null:n}}if(e.reduce&&Array.isArray(e.reduce)){let[r,i,o]=e.reduce;if(i["+"]&&2===i["+"].length&&(i["+"][0]||0).var&&(i["+"][1]||0).var){const e="accumulator"===i["+"][0].var||"accumulator"===i["+"][1].var,s="current"===i["+"][0].var||"current"===i["+"][1].var;if(o=o||0,e&&s)return J({"+":[{"+":r},o]},t,n)}if(i["*"]&&2===i["*"].length&&(i["*"][0]||0).var&&(i["*"][1]||0).var){const e="accumulator"===i["*"][0].var||"accumulator"===i["*"][1].var,s="current"===i["*"][0].var||"current"===i["*"][1].var;if(o=void 0===o?1:o,e&&s)return J({"*":[{"*":r},o]},t,n)}}}(e,t,n);if(r)return r;const i=Object.keys(e)[0];if(t.isData(e,i))return()=>e;const o=!t.disableInline&&b(e,t,{engine:t});if(i in t.methods){const r=function(e,t,n,r){const i=t.methods[n],o=i.method?i.method:i;if(i.lazy){const i=e[n];return(e,n)=>o(i,e,n||r,t)}let s=e[n];if(s&&"object"==typeof s||i.optimizeUnary||(s=[s]),Array.isArray(s)&&1===s.length&&i.optimizeUnary&&!Array.isArray(s[0])&&(s=s[0]),Array.isArray(s)){const e=s.map((e=>J(e,t,r)));if(e.every((e=>"function"!=typeof e)))return(n,i)=>o(e,n,i||r,t);if(1===e.length){const n=e[0];return(e,i)=>o([n(e,i)],e,i||r,t)}if(2===e.length){const[n,i]=e;return"function"==typeof n&&"function"==typeof i?(e,s)=>o([n(e,s),i(e,s)],e,s||r,t):"function"==typeof n?(e,s)=>o([n(e,s),i],e,s||r,t):(e,s)=>o([n,i(e,s)],e,s||r,t)}return(n,i)=>{const s=e.map((e=>"function"==typeof e?e(n,i):e));return o(s,n,i||r,t)}}{const e=J(s,t,r);if(i.optimizeUnary){const i=n=>!n||void 0===n[e]||"function"==typeof n[e]&&!t.allowFunctions?null:n[e];if("function"==typeof e)return(n,i)=>o(e(n,i),n,i||r,t);if(("var"===n||"val"===n)&&t.methods[n][l]){if(!e&&"val"!==n)return e=>!e||void 0===e||"function"==typeof e&&!t.allowFunctions?null:e;if("val"===n||"number"==typeof e||!e.includes(".")&&!e.includes("\\"))return i;if("var"===n&&!e.startsWith("../")){const n=P(String(e));let r;if(2===n.length){const[e,i]=n;return n=>"function"==typeof(r=n&&n[e]&&n[e][i])&&!t.allowFunctions||void 0===r?null:r}if(3===n.length){const[e,i,o]=n;return n=>"function"==typeof(r=n&&n[e]&&n[e][i]&&n[e][i][o])&&!t.allowFunctions||void 0===r?null:r}}}return(n,i)=>o(e,n,i||r,t)}return"function"==typeof e?(n,i)=>o(m(e(n,i)),n,i||r,t):(n,i)=>o(m(e),n,i||r,t)}}(e,t,i,n);return o?r():r}}return e}class R{constructor(e=D,t={disableInline:!1,disableInterpretedOptimization:!1,permissive:!1}){this.disableInline=t.disableInline,this.disableInterpretedOptimization=t.disableInterpretedOptimization,this.methods={...e},this.optimizedMap=new WeakMap,this.missesSinceSeen=0,this.options={disableInline:t.disableInline,disableInterpretedOptimization:t.disableInterpretedOptimization},this.isData||(t.permissive?this.isData=(e,t)=>!(t in this.methods):this.isData=()=>!1)}truthy(e){return(!Array.isArray(e)||0!==e.length)&&(!!Number.isNaN(e)||e)}_parse(e,t,n,r){const i=e[r];if(this.isData(e,r))return e;if(!this.methods[r])throw new Error(`Method '${r}' was not found in the Logic Engine.`);if(("var"===r||"val"===r)&&this.methods[r][l]){const e=i&&"object"==typeof i?this.run(i,t,{above:n}):i;return this.methods[r].method(e,t,n,this,null)}if("function"==typeof this.methods[r]){const e=i&&"object"==typeof i?m(this.run(i,t,{above:n})):[i];return this.methods[r](e,t,n,this)}if("object"==typeof this.methods[r]){const{method:e,lazy:o}=this.methods[r];return e(o?i:i&&"object"==typeof i?m(this.run(i,t,{above:n})):[i],t,n,this)}throw new Error(`Method '${r}' is not set up properly.`)}addMethod(e,t,{deterministic:n,optimizeUnary:r}={}){t="function"==typeof t?{method:t,lazy:!1}:{...t,lazy:void 0!==t.traverse?!t.traverse:t.lazy},Object.assign(t,B({deterministic:n,optimizeUnary:r})),this.methods[e]=h(t)}addModule(e,t,n){Object.getOwnPropertyNames(t).forEach((r=>{"function"!=typeof t[r]&&"object"!=typeof t[r]||this.addMethod(`${e}${e?".":""}${r}`,t[r],n)}))}run(e,t={},n={}){const{above:r=[]}=n;if(!this.disableInterpretedOptimization&&"object"==typeof e&&e){if(this.missesSinceSeen>500&&(this.disableInterpretedOptimization=!0,this.missesSinceSeen=0),this.optimizedMap.has(e)){this.missesSinceSeen=0;const n=this.optimizedMap.get(e);return"function"==typeof n?n(t,r):n}{this.optimizedMap.set(e,J(e,this,r)),this.missesSinceSeen++;const n=this.optimizedMap.get(e);return"function"==typeof n?n(t,r):n}}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=this.run(e[i],t,{above:r});return n}if(e&&"object"==typeof e){const n=Object.keys(e);if(n.length>0){const i=n[0];return this._parse(e,t,r,i)}}return e}build(e,t={}){const{above:n=[],top:r=!0}=t;if(r){const t=C(e,{state:{},engine:this,above:n});return"function"==typeof t||!0===r?(...e)=>"function"==typeof t?t(...e):t:t}return e}}var z=n(2303),V=n(4848);function U(e){let{children:t,fallback:n}=e;return(0,z.A)()?(0,V.jsx)(V.Fragment,{children:t?.()}):n??null}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=e.length?e.apply(this,i):function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.apply(n,[].concat(i,r))}}}function ee(e){return{}.toString.call(e).includes("Object")}function te(e){return"function"==typeof e}var ne=Q((function(e,t){throw new Error(e[t]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),re={changes:function(e,t){return ee(t)||ne("changeType"),Object.keys(t).some((function(t){return n=e,r=t,!Object.prototype.hasOwnProperty.call(n,r);var n,r}))&&ne("changeField"),t},selector:function(e){te(e)||ne("selectorType")},handler:function(e){te(e)||ee(e)||ne("handlerType"),ee(e)&&Object.values(e).some((function(e){return!te(e)}))&&ne("handlersType")},initial:function(e){var t;e||ne("initialIsRequired"),ee(e)||ne("initialType"),t=e,Object.keys(t).length||ne("initialContent")}};function ie(e,t){return te(t)?t(e.current):t}function oe(e,t){return e.current=H(H({},e.current),t),t}function se(e,t,n){return te(t)?t(e.current):Object.keys(n).forEach((function(n){var r;return null===(r=t[n])||void 0===r?void 0:r.call(t,e.current[n])})),n}const ae={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};re.initial(e),re.handler(t);var n={current:e},r=Q(se)(n,t),i=Q(oe)(n),o=Q(re.changes)(e),s=Q(ie)(n);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return re.selector(e),e(n.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(r,i,o,s)(e)}]}};const le={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};const ue=function(e){return{}.toString.call(e).includes("Object")};var ce={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},he=function(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=e.length?e.apply(this,i):function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.apply(n,[].concat(i,r))}}}((function(e,t){throw new Error(e[t]||e.default)}))(ce),me={config:function(e){return e||he("configIsRequired"),ue(e)||he("configType"),e.urls?(console.warn(ce.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};const de=me;const fe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}};const pe=function e(t,n){return Object.keys(n).forEach((function(r){n[r]instanceof Object&&t[r]&&Object.assign(n[r],e(t[r],n[r]))})),G(G({},t),n)};var ye={type:"cancelation",msg:"operation is manually canceled"};const ge=function(e){var t=!1,n=new Promise((function(n,r){e.then((function(e){return t?r(ye):n(e)})),e.catch(r)}));return n.cancel=function(){return t=!0},n};var be,Te,Ae=ae.create({config:le,isInitialized:!1,resolve:null,reject:null,monaco:null}),Ce=(Te=2,function(e){if(Array.isArray(e))return e}(be=Ae)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(be,Te)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(be,Te)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),we=Ce[0],ve=Ce[1];function Le(e){return document.body.appendChild(e)}function _e(e){var t,n,r=we((function(e){return{config:e.config,reject:e.reject}})),i=(t="".concat(r.config.paths.vs,"/loader.js"),n=document.createElement("script"),t&&(n.src=t),n);return i.onload=function(){return e()},i.onerror=r.reject,i}function Pe(){var e=we((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],(function(t){Ne(t),e.resolve(t)}),(function(t){e.reject(t)}))}function Ne(e){we().monaco||ve({monaco:e})}var xe=new Promise((function(e,t){return ve({resolve:e,reject:t})})),Se={config:function(e){var t=de.config(e),n=t.monaco,r=K(t,["monaco"]);ve((function(e){return{config:pe(e.config,r),monaco:n}}))},init:function(){var e=we((function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}}));if(!e.isInitialized){if(ve({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),ge(xe);if(window.monaco&&window.monaco.editor)return Ne(window.monaco),e.resolve(window.monaco),ge(xe);fe(Le,_e)(Pe)}return ge(xe)},__getMonacoInstance:function(){return we((function(e){return e.monaco}))}};const ke=Se;var Oe={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ie={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}};var Ee=function({children:e}){return r.createElement("div",{style:Ie.container},e)};var je=function({width:e,height:t,isEditorReady:n,loading:i,_ref:o,className:s,wrapperProps:a}){return r.createElement("section",{style:{...Oe.wrapper,width:e,height:t},...a},!n&&r.createElement(Ee,null,i),r.createElement("div",{ref:o,style:{...Oe.fullWidth,...!n&&Oe.hide},className:s}))},Me=(0,r.memo)(je);var $e=function(e){(0,r.useEffect)(e,[])};var Fe=function(e,t,n=!0){let i=(0,r.useRef)(!0);(0,r.useEffect)(i.current||!n?()=>{i.current=!1}:e,t)};function De(){}function Be(e,t,n,r){return function(e,t){return e.editor.getModel(Je(e,t))}(e,r)||function(e,t,n,r){return e.editor.createModel(t,n,r?Je(e,r):void 0)}(e,t,n,r)}function Je(e,t){return e.Uri.parse(t)}var Re=function({original:e,modified:t,language:n,originalLanguage:i,modifiedLanguage:o,originalModelPath:s,modifiedModelPath:a,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:u=!1,theme:c="light",loading:h="Loading...",options:m={},height:d="100%",width:f="100%",className:p,wrapperProps:y={},beforeMount:g=De,onMount:b=De}){let[T,A]=(0,r.useState)(!1),[C,w]=(0,r.useState)(!0),v=(0,r.useRef)(null),L=(0,r.useRef)(null),_=(0,r.useRef)(null),P=(0,r.useRef)(b),N=(0,r.useRef)(g),x=(0,r.useRef)(!1);$e((()=>{let e=ke.init();return e.then((e=>(L.current=e)&&w(!1))).catch((e=>"cancelation"!==e?.type&&console.error("Monaco initialization: error:",e))),()=>v.current?function(){let e=v.current?.getModel();l||e?.original?.dispose(),u||e?.modified?.dispose(),v.current?.dispose()}():e.cancel()})),Fe((()=>{if(v.current&&L.current){let t=v.current.getOriginalEditor(),r=Be(L.current,e||"",i||n||"text",s||"");r!==t.getModel()&&t.setModel(r)}}),[s],T),Fe((()=>{if(v.current&&L.current){let e=v.current.getModifiedEditor(),r=Be(L.current,t||"",o||n||"text",a||"");r!==e.getModel()&&e.setModel(r)}}),[a],T),Fe((()=>{let e=v.current.getModifiedEditor();e.getOption(L.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())}),[t],T),Fe((()=>{v.current?.getModel()?.original.setValue(e||"")}),[e],T),Fe((()=>{let{original:e,modified:t}=v.current.getModel();L.current.editor.setModelLanguage(e,i||n||"text"),L.current.editor.setModelLanguage(t,o||n||"text")}),[n,i,o],T),Fe((()=>{L.current?.editor.setTheme(c)}),[c],T),Fe((()=>{v.current?.updateOptions(m)}),[m],T);let S=(0,r.useCallback)((()=>{if(!L.current)return;N.current(L.current);let r=Be(L.current,e||"",i||n||"text",s||""),l=Be(L.current,t||"",o||n||"text",a||"");v.current?.setModel({original:r,modified:l})}),[n,t,o,e,i,s,a]),k=(0,r.useCallback)((()=>{!x.current&&_.current&&(v.current=L.current.editor.createDiffEditor(_.current,{automaticLayout:!0,...m}),S(),L.current?.editor.setTheme(c),A(!0),x.current=!0)}),[m,c,S]);return(0,r.useEffect)((()=>{T&&P.current(v.current,L.current)}),[T]),(0,r.useEffect)((()=>{!C&&!T&&k()}),[C,T,k]),r.createElement(Me,{width:f,height:d,isEditorReady:T,loading:h,_ref:_,className:p,wrapperProps:y})};(0,r.memo)(Re);var ze=function(e){let t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current},Ve=new Map;var Ue=function({defaultValue:e,defaultLanguage:t,defaultPath:n,value:i,language:o,path:s,theme:a="light",line:l,loading:u="Loading...",options:c={},overrideServices:h={},saveViewState:m=!0,keepCurrentModel:d=!1,width:f="100%",height:p="100%",className:y,wrapperProps:g={},beforeMount:b=De,onMount:T=De,onChange:A,onValidate:C=De}){let[w,v]=(0,r.useState)(!1),[L,_]=(0,r.useState)(!0),P=(0,r.useRef)(null),N=(0,r.useRef)(null),x=(0,r.useRef)(null),S=(0,r.useRef)(T),k=(0,r.useRef)(b),O=(0,r.useRef)(),I=(0,r.useRef)(i),E=ze(s),j=(0,r.useRef)(!1),M=(0,r.useRef)(!1);$e((()=>{let e=ke.init();return e.then((e=>(P.current=e)&&_(!1))).catch((e=>"cancelation"!==e?.type&&console.error("Monaco initialization: error:",e))),()=>N.current?(O.current?.dispose(),d?m&&Ve.set(s,N.current.saveViewState()):N.current.getModel()?.dispose(),void N.current.dispose()):e.cancel()})),Fe((()=>{let r=Be(P.current,e||i||"",t||o||"",s||n||"");r!==N.current?.getModel()&&(m&&Ve.set(E,N.current?.saveViewState()),N.current?.setModel(r),m&&N.current?.restoreViewState(Ve.get(s)))}),[s],w),Fe((()=>{N.current?.updateOptions(c)}),[c],w),Fe((()=>{!N.current||void 0===i||(N.current.getOption(P.current.editor.EditorOption.readOnly)?N.current.setValue(i):i!==N.current.getValue()&&(M.current=!0,N.current.executeEdits("",[{range:N.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),N.current.pushUndoStop(),M.current=!1))}),[i],w),Fe((()=>{let e=N.current?.getModel();e&&o&&P.current?.editor.setModelLanguage(e,o)}),[o],w),Fe((()=>{void 0!==l&&N.current?.revealLine(l)}),[l],w),Fe((()=>{P.current?.editor.setTheme(a)}),[a],w);let $=(0,r.useCallback)((()=>{if(x.current&&P.current&&!j.current){k.current(P.current);let r=s||n,u=Be(P.current,i||e||"",t||o||"",r||"");N.current=P.current?.editor.create(x.current,{model:u,automaticLayout:!0,...c},h),m&&N.current.restoreViewState(Ve.get(r)),P.current.editor.setTheme(a),void 0!==l&&N.current.revealLine(l),v(!0),j.current=!0}}),[e,t,n,i,o,s,c,h,m,a,l]);return(0,r.useEffect)((()=>{w&&S.current(N.current,P.current)}),[w]),(0,r.useEffect)((()=>{!L&&!w&&$()}),[L,w,$]),I.current=i,(0,r.useEffect)((()=>{w&&A&&(O.current?.dispose(),O.current=N.current?.onDidChangeModelContent((e=>{M.current||A(N.current.getValue(),e)})))}),[w,A]),(0,r.useEffect)((()=>{if(w){let e=P.current.editor.onDidChangeMarkers((e=>{let t=N.current.getModel()?.uri;if(t&&e.find((e=>e.path===t.path))){let e=P.current.editor.getModelMarkers({resource:t});C?.(e)}}));return()=>{e?.dispose()}}return()=>{}}),[w,C]),r.createElement(Me,{width:f,height:p,isEditorReady:w,loading:u,_ref:x,className:y,wrapperProps:g})},We=(0,r.memo)(Ue),qe=n(8193),Ge=n(945);const Ke=new R,Ze=new Ge.ZA;if(qe.A.canUseDOM){const e=window.ResizeObserver;window.ResizeObserver=function(t){return new e(((e,n)=>{window.requestAnimationFrame((()=>{t(e,n)}))}))};for(let t in e)e.hasOwnProperty(t)&&(window.ResizeObserver[t]=e[t])}function Xe(e){let{defaultLogic:t="",defaultData:n=""}=e;const[i,o]=(0,r.useState)(t),[s,a]=(0,r.useState)(n),[l,u]=(0,r.useState)(""),[c,h]=(r.useRef(null),(0,r.useState)({built:()=>{}}));function m(){try{u(c.built(s))}catch(e){Number.isNaN(e)&&u({type:"NaN"}),e.type&&u(e)}}return(0,r.useEffect)((()=>{try{h({built:Ke.build(i)})}catch(e){Number.isNaN(e)&&(e={type:"NaN"}),h({built:()=>e})}}),[i]),(0,r.useEffect)((()=>{(l??"").toString()||m()}),[c]),"undefined"!=typeof window?(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(U,{children:()=>(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("b",{children:"Logic:"}),(0,V.jsx)(We,{options:{minimap:{enabled:!1}},height:"180px",className:"editor",defaultLanguage:"json",defaultValue:Ze.Serialize(i),onChange:e=>{try{o(JSON.parse(e))}catch(t){}}}),(0,V.jsx)("br",{}),(0,V.jsx)("b",{children:"Data:"}),(0,V.jsx)(We,{options:{minimap:{enabled:!1}},className:"editor",height:"140px",defaultLanguage:"json",defaultValue:JSON.stringify(s,void 0,4),onChange:e=>{try{a(JSON.parse(e))}catch(t){}}}),(0,V.jsx)("br",{}),(0,V.jsx)("button",{className:"btn btn-secondary",onClick:m,children:"Execute"})," ",(0,V.jsx)("br",{}),"Output: ",(0,V.jsx)("br",{}),(0,V.jsx)("code",{children:JSON.stringify(l,((e,t)=>Number.isNaN(t)?{error:"NaN"}:t))})]})})}):null}},4368:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BracketPaddingType=void 0,function(e){e[e.Empty=0]="Empty",e[e.Simple=1]="Simple",e[e.Complex=2]="Complex"}(t.BracketPaddingType||(t.BracketPaddingType={}))},9330:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommentPolicy=void 0,function(e){e[e.TreatAsError=0]="TreatAsError",e[e.Remove=1]="Remove",e[e.Preserve=2]="Preserve"}(t.CommentPolicy||(t.CommentPolicy={}))},5491:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertDataToDom=void 0;const r=n(3072),i=n(3144),o=n(955);t.ConvertDataToDom=function e(t,n,s=100){var a;if(s<=0)throw new o.FracturedJsonError("Depth limit exceeded - possible circular reference");const l=typeof t;switch(l){case"function":case"symbol":case"undefined":return}if(t&&t.toJSON){return e(JSON.parse(JSON.stringify(t)),n,s-1)}const u=new r.JsonItem;if(u.Name=n?JSON.stringify(n):"",null===t)u.Type=i.JsonItemType.Null,u.Value="null";else if(Array.isArray(t)){u.Type=i.JsonItemType.Array,u.Children=t.map((t=>{var n;return null!==(n=e(t,void 0,s-1))&&void 0!==n?n:e(null,void 0,s-1)})),u.Children=[];for(let n=0;n<t.length;++n)u.Children[n]=null!==(a=e(t[n],void 0,s-1))&&void 0!==a?a:e(null,void 0,s-1)}else if("object"===l){u.Type=i.JsonItemType.Object;for(const n of Object.entries(t)){const t=e(n[1],n[0],s-1);t&&u.Children.push(t)}}else{switch(l){case"string":u.Type=i.JsonItemType.String;break;case"number":case"bigint":u.Type=i.JsonItemType.Number;break;case"boolean":u.Type=t?i.JsonItemType.True:i.JsonItemType.False}u.Value=JSON.stringify(t)}if(u.Children.length>0){const e=u.Children.map((e=>e.Complexity)).reduce(((e,t)=>Math.max(e,t)));u.Complexity=e+1}return u}},7584:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EolStyle=void 0,function(e){e[e.Crlf=0]="Crlf",e[e.Lf=1]="Lf"}(t.EolStyle||(t.EolStyle={}))},5123:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Formatter=void 0;const r=n(8787),i=n(3714),o=n(5230),s=n(3144),a=n(4368),l=n(4375),u=n(955),c=n(6110),h=n(5491);class m{constructor(){this.Options=new r.FracturedJsonOptions,this.StringLengthFunc=m.StringLengthByCharCount,this._buffer=new i.StringJoinBuffer(this.Options.OmitTrailingWhitespace),this._pads=new o.PaddedFormattingTokens(new r.FracturedJsonOptions,m.StringLengthByCharCount)}static StringLengthByCharCount(e){return e.length}Reformat(e,t=0){const n=new i.StringJoinBuffer(this.Options.OmitTrailingWhitespace),r=new c.Parser;r.Options=this.Options;const o=r.ParseTopLevel(e,!0);return this.FormatTopLevel(o,t,n),n.Flush(),n.AsString()}Serialize(e,t=0,n=100){const r=new i.StringJoinBuffer(this.Options.OmitTrailingWhitespace),o=(0,h.ConvertDataToDom)(e,void 0,n);if(o)return this.FormatTopLevel([o],t,r),r.Flush(),r.AsString()}Minify(e){const t=new i.StringJoinBuffer(this.Options.OmitTrailingWhitespace),n=new c.Parser;n.Options=this.Options;const r=n.ParseTopLevel(e,!0);return this.MinifyTopLevel(r,t),t.Flush(),t.AsString()}FormatTopLevel(e,t,n){this._buffer=n,this._pads=new o.PaddedFormattingTokens(this.Options,this.StringLengthFunc);for(const r of e)this.ComputeItemLengths(r),this.FormatItem(r,t,!1);this._buffer=new i.StringJoinBuffer(this.Options.OmitTrailingWhitespace)}MinifyTopLevel(e,t){this._buffer=t,this._pads=new o.PaddedFormattingTokens(this.Options,this.StringLengthFunc);let n=!0;for(const r of e)n=this.MinifyItem(r,n);this._buffer=new i.StringJoinBuffer(this.Options.OmitTrailingWhitespace)}ComputeItemLengths(e){const t="\n";for(const n of e.Children)this.ComputeItemLengths(n);switch(e.Type){case s.JsonItemType.Null:e.ValueLength=this._pads.LiteralNullLen;break;case s.JsonItemType.True:e.ValueLength=this._pads.LiteralTrueLen;break;case s.JsonItemType.False:e.ValueLength=this._pads.LiteralFalseLen;break;default:e.ValueLength=this.StringLengthFunc(e.Value)}if(e.NameLength=this.StringLengthFunc(e.Name),e.PrefixCommentLength=this.StringLengthFunc(e.PrefixComment),e.MiddleCommentLength=this.StringLengthFunc(e.MiddleComment),e.PostfixCommentLength=this.StringLengthFunc(e.PostfixComment),e.RequiresMultipleLines=m.IsCommentOrBlankLine(e.Type)||e.Children.some((e=>e.RequiresMultipleLines||e.IsPostCommentLineStyle))||e.PrefixComment.indexOf(t)>=0||e.MiddleComment.indexOf(t)>=0||e.PostfixComment.indexOf(t)>=0||e.Value.indexOf(t)>=0,e.Type===s.JsonItemType.Array||e.Type===s.JsonItemType.Object){const t=m.GetPaddingType(e);e.ValueLength=this._pads.StartLen(e.Type,t)+this._pads.EndLen(e.Type,t)+e.Children.map((e=>e.MinimumTotalLength)).reduce(((e,t)=>e+t),0)+Math.max(0,this._pads.CommaLen*(e.Children.length-1))}e.MinimumTotalLength=(e.PrefixCommentLength>0?e.PrefixCommentLength+this._pads.CommentLen:0)+(e.NameLength>0?e.NameLength+this._pads.ColonLen:0)+(e.MiddleCommentLength>0?e.MiddleCommentLength+this._pads.CommentLen:0)+e.ValueLength+(e.PostfixCommentLength>0?e.PostfixCommentLength+this._pads.CommentLen:0)}FormatItem(e,t,n){switch(e.Type){case s.JsonItemType.Array:case s.JsonItemType.Object:this.FormatContainer(e,t,n);break;case s.JsonItemType.BlankLine:this.FormatBlankLine();break;case s.JsonItemType.BlockComment:case s.JsonItemType.LineComment:this.FormatStandaloneComment(e,t);break;default:e.RequiresMultipleLines?this.FormatSplitKeyValue(e,t,n):this.FormatInlineElement(e,t,n)}}FormatContainer(e,t,n){if(t>this.Options.AlwaysExpandDepth){if(this.FormatContainerInline(e,t,n))return;if(this.FormatContainerCompactMultiline(e,t,n))return}t>=this.Options.AlwaysExpandDepth&&this.FormatContainerTable(e,t,n)||this.FormatContainerExpanded(e,t,n)}FormatContainerInline(e,t,n){if(e.RequiresMultipleLines)return!1;const r=e.MinimumTotalLength+(n?this._pads.CommaLen:0);return!(e.Complexity>this.Options.MaxInlineComplexity||r>this.AvailableLineSpace(t))&&(this._buffer.Add(this.Options.PrefixString,this._pads.Indent(t)),this.InlineElement(e,n),this._buffer.EndLine(this._pads.EOL),!0)}FormatContainerCompactMultiline(e,t,n){if(e.Type!==s.JsonItemType.Array)return!1;if(e.Complexity>this.Options.MaxCompactArrayComplexity)return!1;if(e.RequiresMultipleLines)return!1;const r=new l.TableTemplate(this._pads,this.Options.NumberListAlignment);r.MeasureTableRoot(e);const i=this.AvailableLineSpace(t+1);let o=this._pads.CommaLen;if(r.IsRowDataCompatible?o+=r.TotalLength:o+=e.Children.map((e=>e.MinimumTotalLength)).reduce(((e,t)=>e+t),0)/e.Children.length,o*this.Options.MinCompactArrayRowItems>i)return!1;const u=this.StandardFormatStart(e,t);this._buffer.Add(this._pads.Start(e.Type,a.BracketPaddingType.Empty));const c=this.AvailableLineSpace(u+1);let h=-1;for(let s=0;s<e.Children.length;++s){const t=e.Children[s],n=s<e.Children.length-1,i=(n?this._pads.CommaLen:0)+(r.IsRowDataCompatible?r.TotalLength:t.MinimumTotalLength);h<i&&(this._buffer.EndLine(this._pads.EOL).Add(this.Options.PrefixString,this._pads.Indent(u+1)),h=c),r.IsRowDataCompatible?this.InlineTableRowSegment(r,t,n,!1):this.InlineElement(t,n),h-=i}return this._buffer.EndLine(this._pads.EOL).Add(this.Options.PrefixString,this._pads.Indent(u),this._pads.End(e.Type,a.BracketPaddingType.Empty)),this.StandardFormatEnd(e,n),!0}FormatContainerTable(e,t,n){if(e.Complexity>this.Options.MaxTableRowComplexity+1)return!1;const r=this.AvailableLineSpace(t+1)-this._pads.CommaLen;if(e.Children.filter((e=>!m.IsCommentOrBlankLine(e.Type))).some((e=>e.MinimumTotalLength>r)))return!1;const i=new l.TableTemplate(this._pads,this.Options.NumberListAlignment);if(i.MeasureTableRoot(e),!i.IsRowDataCompatible)return!1;if(!i.TryToFit(r))return!1;const o=this.StandardFormatStart(e,t);this._buffer.Add(this._pads.Start(e.Type,a.BracketPaddingType.Empty)).EndLine(this._pads.EOL);const u=m.IndexOfLastElement(e.Children);for(let a=0;a<e.Children.length;++a){const t=e.Children[a];t.Type!==s.JsonItemType.BlankLine?t.Type!==s.JsonItemType.LineComment&&t.Type!==s.JsonItemType.BlockComment?(this._buffer.Add(this.Options.PrefixString,this._pads.Indent(o+1)),this.InlineTableRowSegment(i,t,a<u,!0),this._buffer.EndLine(this._pads.EOL)):this.FormatStandaloneComment(t,o+1):this.FormatBlankLine()}return this._buffer.Add(this.Options.PrefixString,this._pads.Indent(o),this._pads.End(e.Type,a.BracketPaddingType.Empty)),this.StandardFormatEnd(e,n),!0}FormatContainerExpanded(e,t,n){const r=this.StandardFormatStart(e,t);this._buffer.Add(this._pads.Start(e.Type,a.BracketPaddingType.Empty)).EndLine(this._pads.EOL);const i=m.IndexOfLastElement(e.Children);for(let o=0;o<e.Children.length;++o)this.FormatItem(e.Children[o],r+1,o<i);this._buffer.Add(this.Options.PrefixString,this._pads.Indent(r),this._pads.End(e.Type,a.BracketPaddingType.Empty)),this.StandardFormatEnd(e,n)}FormatStandaloneComment(e,t){const n=m.NormalizeMultilineComment(e.Value,e.InputPosition.Column);for(const r of n)this._buffer.Add(this.Options.PrefixString,this._pads.Indent(t),r).EndLine(this._pads.EOL)}FormatBlankLine(){this._buffer.Add(this.Options.PrefixString).EndLine(this._pads.EOL)}FormatInlineElement(e,t,n){this._buffer.Add(this.Options.PrefixString,this._pads.Indent(t)),this.InlineElement(e,n),this._buffer.EndLine(this._pads.EOL)}FormatSplitKeyValue(e,t,n){this.StandardFormatStart(e,t),this._buffer.Add(e.Value),this.StandardFormatEnd(e,n)}StandardFormatStart(e,t){if(this._buffer.Add(this.Options.PrefixString,this._pads.Indent(t)),e.PrefixCommentLength>0&&this._buffer.Add(e.PrefixComment,this._pads.Comment),e.NameLength>0&&this._buffer.Add(e.Name,this._pads.Colon),0===e.MiddleCommentLength)return t;if(e.MiddleComment.indexOf("\n")<0)return this._buffer.Add(e.MiddleComment,this._pads.Comment),t;const n=m.NormalizeMultilineComment(e.MiddleComment,Number.MAX_VALUE);this._buffer.EndLine(this._pads.EOL);for(const r of n)this._buffer.Add(this.Options.PrefixString,this._pads.Indent(t+1),r).EndLine(this._pads.EOL);return this._buffer.Add(this.Options.PrefixString,this._pads.Indent(t+1)),t+1}StandardFormatEnd(e,t){t&&e.IsPostCommentLineStyle&&this._buffer.Add(this._pads.Comma),e.PostfixCommentLength>0&&this._buffer.Add(this._pads.Comment,e.PostfixComment),t&&!e.IsPostCommentLineStyle&&this._buffer.Add(this._pads.Comma),this._buffer.EndLine(this._pads.EOL)}InlineElement(e,t){if(e.RequiresMultipleLines)throw new u.FracturedJsonError("Logic error - trying to inline invalid element");e.PrefixCommentLength>0&&this._buffer.Add(e.PrefixComment,this._pads.Comment),e.NameLength>0&&this._buffer.Add(e.Name,this._pads.Colon),e.MiddleCommentLength>0&&this._buffer.Add(e.MiddleComment,this._pads.Comment),this.InlineElementRaw(e),t&&e.IsPostCommentLineStyle&&this._buffer.Add(this._pads.Comma),e.PostfixCommentLength>0&&this._buffer.Add(this._pads.Comment,e.PostfixComment),t&&!e.IsPostCommentLineStyle&&this._buffer.Add(this._pads.Comma)}InlineElementRaw(e){if(e.Type===s.JsonItemType.Array){const t=m.GetPaddingType(e);this._buffer.Add(this._pads.ArrStart(t));for(let n=0;n<e.Children.length;++n)this.InlineElement(e.Children[n],n<e.Children.length-1);this._buffer.Add(this._pads.ArrEnd(t))}else if(e.Type===s.JsonItemType.Object){const t=m.GetPaddingType(e);this._buffer.Add(this._pads.ObjStart(t));for(let n=0;n<e.Children.length;++n)this.InlineElement(e.Children[n],n<e.Children.length-1);this._buffer.Add(this._pads.ObjEnd(t))}else this._buffer.Add(e.Value)}InlineTableRowSegment(e,t,n,r){e.PrefixCommentLength>0&&this._buffer.Add(t.PrefixComment,this._pads.Spaces(e.PrefixCommentLength-t.PrefixCommentLength),this._pads.Comment),e.NameLength>0&&this._buffer.Add(t.Name,this._pads.Spaces(e.NameLength-t.NameLength),this._pads.Colon),e.MiddleCommentLength>0&&this._buffer.Add(t.MiddleComment,this._pads.Spaces(e.MiddleCommentLength-t.MiddleCommentLength),this._pads.Comment),e.Children.length>0&&t.Type!==s.JsonItemType.Null?e.Type===s.JsonItemType.Array?this.InlineTableRawArray(e,t):this.InlineTableRawObject(e,t):e.IsNumberList?e.FormatNumber(this._buffer,t):(this.InlineElementRaw(t),this._buffer.Add(this._pads.Spaces(e.CompositeValueLength-t.ValueLength)));const i=t.IsPostCommentLineStyle||0===t.PostfixCommentLength;i&&(n?this._buffer.Add(this._pads.Comma):r&&this._buffer.Add(this._pads.DummyComma)),e.PostfixCommentLength>0&&this._buffer.Add(this._pads.Comment,t.PostfixComment,this._pads.Spaces(e.PostfixCommentLength-t.PostfixCommentLength)),i||(n?this._buffer.Add(this._pads.Comma):r&&this._buffer.Add(this._pads.DummyComma))}InlineTableRawArray(e,t){this._buffer.Add(this._pads.ArrStart(e.PadType));for(let n=0;n<e.Children.length;++n){const r=n===e.Children.length-1,i=n===t.Children.length-1,o=n>=t.Children.length,s=e.Children[n];o?(this._buffer.Add(this._pads.Spaces(s.TotalLength)),r||this._buffer.Add(this._pads.DummyComma)):(this.InlineTableRowSegment(s,t.Children[n],!i,!1),i&&!r&&this._buffer.Add(this._pads.DummyComma))}this._buffer.Add(this._pads.ArrEnd(e.PadType))}InlineTableRawObject(e,t){const n=e.Children.map((e=>{return{tt:e,ji:(n=e,t.Children.find((e=>e.Name===n.LocationInParent)))};var n}));let r=n.length-1;for(;r>=0&&!n[r].ji;)r-=1;this._buffer.Add(this._pads.ObjStart(e.PadType));for(let i=0;i<n.length;++i){const e=n[i].tt,t=n[i].ji,o=i===r,s=i===n.length-1;t?(this.InlineTableRowSegment(e,t,!o,!1),o&&!s&&this._buffer.Add(this._pads.DummyComma)):(this._buffer.Add(this._pads.Spaces(e.TotalLength)),s||this._buffer.Add(this._pads.DummyComma))}this._buffer.Add(this._pads.ObjEnd(e.PadType))}AvailableLineSpace(e){return Math.min(this.Options.MaxInlineLength,this.Options.MaxTotalLineLength-this._pads.PrefixStringLen-this.Options.IndentSpaces*e)}MinifyItem(e,t){const n="\n";if(this._buffer.Add(e.PrefixComment),e.Name.length>0&&this._buffer.Add(e.Name,":"),e.MiddleComment.indexOf(n)>=0){const t=m.NormalizeMultilineComment(e.MiddleComment,Number.MAX_VALUE);for(const e of t)this._buffer.Add(e,n)}else this._buffer.Add(e.MiddleComment);if(e.Type===s.JsonItemType.Array||e.Type===s.JsonItemType.Object){let t;e.Type===s.JsonItemType.Array?(this._buffer.Add("["),t="]"):(this._buffer.Add("{"),t="}");let n=!1,r=!1;for(const i of e.Children)m.IsCommentOrBlankLine(i.Type)||(n&&this._buffer.Add(","),n=!0),r=this.MinifyItem(i,r);this._buffer.Add(t)}else{if(e.Type===s.JsonItemType.BlankLine)return t||this._buffer.Add(n),this._buffer.Add(n),!0;if(e.Type===s.JsonItemType.LineComment)return t||this._buffer.Add(n),this._buffer.Add(e.Value,n),!0;if(e.Type===s.JsonItemType.BlockComment){if(t||this._buffer.Add(n),e.Value.indexOf(n)>=0){const t=m.NormalizeMultilineComment(e.Value,e.InputPosition.Column);for(const e of t)this._buffer.Add(e,n);return!0}return this._buffer.Add(e.Value,n),!0}this._buffer.Add(e.Value)}return this._buffer.Add(e.PostfixComment),!!(e.PostfixComment.length>0&&e.IsPostCommentLineStyle)&&(this._buffer.Add(n),!0)}static GetPaddingType(e){return 0===e.Children.length?a.BracketPaddingType.Empty:e.Complexity>=2?a.BracketPaddingType.Complex:a.BracketPaddingType.Simple}static NormalizeMultilineComment(e,t){const n=e.replace(/\r/g,"").split("\n").filter((e=>e.length>0));for(let r=1;r<n.length;++r){const e=n[r];let i=0;for(;i<e.length&&i<t&&/\s/.test(e[i]);)i+=1;n[r]=e.substring(i)}return n}static IndexOfLastElement(e){for(let t=e.length-1;t>=0;--t)if(!this.IsCommentOrBlankLine(e[t].Type))return t;return-1}static IsCommentOrBlankLine(e){return e===s.JsonItemType.BlankLine||e===s.JsonItemType.BlockComment||e===s.JsonItemType.LineComment}}t.Formatter=m},955:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FracturedJsonError=void 0;class n extends Error{constructor(e,t){super(t?`${e} at idx=${t.Index}, row=${t.Row}, col=${t.Column}`:e),this.InputPosition=t}}t.FracturedJsonError=n},8787:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FracturedJsonOptions=void 0;const r=n(7584),i=n(9330),o=n(8975);t.FracturedJsonOptions=class{constructor(){this.JsonEolStyle=r.EolStyle.Lf,this.MaxInlineLength=2e9,this.MaxTotalLineLength=120,this.MaxInlineComplexity=2,this.MaxCompactArrayComplexity=1,this.MaxTableRowComplexity=2,this.MinCompactArrayRowItems=3,this.AlwaysExpandDepth=-1,this.NestedBracketPadding=!0,this.SimpleBracketPadding=!1,this.ColonPadding=!0,this.CommaPadding=!0,this.CommentPadding=!0,this.OmitTrailingWhitespace=!1,this.NumberListAlignment=o.NumberListAlignment.Normalize,this.IndentSpaces=4,this.UseTabToIndent=!1,this.PrefixString="",this.CommentPolicy=i.CommentPolicy.TreatAsError,this.PreserveBlankLines=!1,this.AllowTrailingCommas=!1}}},3072:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JsonItem=void 0;const r=n(3144);t.JsonItem=class{constructor(){this.Type=r.JsonItemType.Null,this.InputPosition={Index:0,Row:0,Column:0},this.Complexity=0,this.Name="",this.Value="",this.PrefixComment="",this.MiddleComment="",this.PostfixComment="",this.IsPostCommentLineStyle=!1,this.NameLength=0,this.ValueLength=0,this.PrefixCommentLength=0,this.MiddleCommentLength=0,this.PostfixCommentLength=0,this.MinimumTotalLength=0,this.RequiresMultipleLines=!1,this.Children=[]}}},3144:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JsonItemType=void 0,function(e){e[e.Null=0]="Null",e[e.False=1]="False",e[e.True=2]="True",e[e.String=3]="String",e[e.Number=4]="Number",e[e.Object=5]="Object",e[e.Array=6]="Array",e[e.BlankLine=7]="BlankLine",e[e.LineComment=8]="LineComment",e[e.BlockComment=9]="BlockComment"}(t.JsonItemType||(t.JsonItemType={}))},8975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NumberListAlignment=void 0,function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Decimal=2]="Decimal",e[e.Normalize=3]="Normalize"}(t.NumberListAlignment||(t.NumberListAlignment={}))},5230:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaddedFormattingTokens=void 0;const r=n(4368),i=n(7584),o=n(3144);t.PaddedFormattingTokens=class{constructor(e,t){this._arrStart=[],this._arrStart[r.BracketPaddingType.Empty]="[",this._arrStart[r.BracketPaddingType.Simple]=e.SimpleBracketPadding?"[ ":"[",this._arrStart[r.BracketPaddingType.Complex]=e.NestedBracketPadding?"[ ":"[",this._arrEnd=[],this._arrEnd[r.BracketPaddingType.Empty]="]",this._arrEnd[r.BracketPaddingType.Simple]=e.SimpleBracketPadding?" ]":"]",this._arrEnd[r.BracketPaddingType.Complex]=e.NestedBracketPadding?" ]":"]",this._objStart=[],this._objStart[r.BracketPaddingType.Empty]="{",this._objStart[r.BracketPaddingType.Simple]=e.SimpleBracketPadding?"{ ":"{",this._objStart[r.BracketPaddingType.Complex]=e.NestedBracketPadding?"{ ":"{",this._objEnd=[],this._objEnd[r.BracketPaddingType.Empty]="}",this._objEnd[r.BracketPaddingType.Simple]=e.SimpleBracketPadding?" }":"}",this._objEnd[r.BracketPaddingType.Complex]=e.NestedBracketPadding?" }":"}",this._comma=e.CommaPadding?", ":",",this._colon=e.ColonPadding?": ":":",this._comment=e.CommentPadding?" ":"",this._eol=e.JsonEolStyle===i.EolStyle.Crlf?"\r\n":"\n",this._arrStartLen=this._arrStart.map(t),this._arrEndLen=this._arrEnd.map(t),this._objStartLen=this._objStart.map(t),this._objEndLen=this._objEnd.map(t),this._indentStrings=["",e.UseTabToIndent?"\t":" ".repeat(e.IndentSpaces)],this._spaceStrings=[""," "],this._commaLen=t(this._comma),this._colonLen=t(this._colon),this._commentLen=t(this._comment),this._literalNullLen=t("null"),this._literalTrueLen=t("true"),this._literalFalseLen=t("false"),this._prefixStringLen=t(e.PrefixString),this._dummyComma=" ".repeat(this._commaLen)}get Comma(){return this._comma}get Colon(){return this._colon}get Comment(){return this._comment}get EOL(){return this._eol}get CommaLen(){return this._commaLen}get ColonLen(){return this._colonLen}get CommentLen(){return this._commentLen}get LiteralNullLen(){return this._literalNullLen}get LiteralTrueLen(){return this._literalTrueLen}get LiteralFalseLen(){return this._literalFalseLen}get PrefixStringLen(){return this._prefixStringLen}get DummyComma(){return this._dummyComma}ArrStart(e){return this._arrStart[e]}ArrEnd(e){return this._arrEnd[e]}ObjStart(e){return this._objStart[e]}ObjEnd(e){return this._objEnd[e]}Start(e,t){return e===o.JsonItemType.Array?this.ArrStart(t):this.ObjStart(t)}End(e,t){return e===o.JsonItemType.Array?this.ArrEnd(t):this.ObjEnd(t)}ArrStartLen(e){return this._arrStartLen[e]}ArrEndLen(e){return this._arrEndLen[e]}ObjStartLen(e){return this._objStartLen[e]}ObjEndLen(e){return this._objEndLen[e]}StartLen(e,t){return e===o.JsonItemType.Array?this.ArrStartLen(t):this.ObjStartLen(t)}EndLen(e,t){return e===o.JsonItemType.Array?this.ArrEndLen(t):this.ObjEndLen(t)}Indent(e){if(e>=this._indentStrings.length)for(let t=this._indentStrings.length;t<=e;++t)this._indentStrings.push(this._indentStrings[t-1]+this._indentStrings[1]);return this._indentStrings[e]}Spaces(e){if(e>=this._spaceStrings.length)for(let t=this._spaceStrings.length;t<=e;++t)this._spaceStrings.push(" ".repeat(t));return this._spaceStrings[e]}}},6110:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;const r=n(8787),i=n(1490),o=n(3072),s=n(3144),a=n(6628),l=n(955),u=n(9330),c=n(4843);class h{constructor(){this.Options=new r.FracturedJsonOptions}ParseTopLevel(e,t){const n=new i.TokenEnumerator((0,c.TokenGenerator)(e));return this.ParseTopLevelFromEnum(n,t)}ParseTopLevelFromEnum(e,t){const n=[];let r=!1;for(;;){if(!e.MoveNext())return n;const i=this.ParseItem(e),o=i.Type===s.JsonItemType.BlockComment||i.Type===s.JsonItemType.LineComment;if(i.Type===s.JsonItemType.BlankLine)this.Options.PreserveBlankLines&&n.push(i);else if(o){if(this.Options.CommentPolicy===u.CommentPolicy.TreatAsError)throw new l.FracturedJsonError("Comments not allowed with current options",i.InputPosition);this.Options.CommentPolicy===u.CommentPolicy.Preserve&&n.push(i)}else{if(t&&r)throw new l.FracturedJsonError("Unexpected start of second top level element",i.InputPosition);n.push(i),r=!0}}}ParseItem(e){switch(e.Current.Type){case a.TokenType.BeginArray:return this.ParseArray(e);case a.TokenType.BeginObject:return this.ParseObject(e);default:return this.ParseSimple(e.Current)}}ParseSimple(e){const t=new o.JsonItem;return t.Type=h.ItemTypeFromTokenType(e),t.Value=e.Text,t.InputPosition=e.InputPosition,t.Complexity=0,t}ParseArray(e){if(e.Current.Type!==a.TokenType.BeginArray)throw new l.FracturedJsonError("Parser logic error",e.Current.InputPosition);const t=e.Current.InputPosition;let n,r,i=-1;const c=[];let d=m.EmptyCollection,f=!1,p=0;for(;!f;){const o=h.GetNextTokenOrThrow(e,t);switch(r&&((null==r?void 0:r.InputPosition.Row)!==o.InputPosition.Row||o.Type===a.TokenType.EndArray)&&(n?(n.PostfixComment=r.Value,n.IsPostCommentLineStyle=r.Type===s.JsonItemType.LineComment):c.push(r),r=void 0),n&&i!==o.InputPosition.Row&&(n=void 0),o.Type){case a.TokenType.EndArray:if(d===m.CommaSeen&&!this.Options.AllowTrailingCommas)throw new l.FracturedJsonError("Array may not end with a comma with current options",o.InputPosition);f=!0;break;case a.TokenType.Comma:if(d!==m.ElementSeen)throw new l.FracturedJsonError("Unexpected comma in array",o.InputPosition);d=m.CommaSeen;break;case a.TokenType.BlankLine:if(!this.Options.PreserveBlankLines)break;c.push(this.ParseSimple(o));break;case a.TokenType.BlockComment:if(this.Options.CommentPolicy===u.CommentPolicy.Remove)break;if(this.Options.CommentPolicy===u.CommentPolicy.TreatAsError)throw new l.FracturedJsonError("Comments not allowed with current options",o.InputPosition);r&&(c.push(r),r=void 0);const t=this.ParseSimple(o);if(h.IsMultilineComment(t)){c.push(t);break}if(n&&d===m.ElementSeen){n.PostfixComment=t.Value,n.IsPostCommentLineStyle=!1,n=void 0;break}r=t;break;case a.TokenType.LineComment:if(this.Options.CommentPolicy===u.CommentPolicy.Remove)break;if(this.Options.CommentPolicy===u.CommentPolicy.TreatAsError)throw new l.FracturedJsonError("Comments not allowed with current options",o.InputPosition);if(r){c.push(r),c.push(this.ParseSimple(o)),r=void 0;break}if(n){n.PostfixComment=o.Text,n.IsPostCommentLineStyle=!0,n=void 0;break}c.push(this.ParseSimple(o));break;case a.TokenType.False:case a.TokenType.True:case a.TokenType.Null:case a.TokenType.String:case a.TokenType.Number:case a.TokenType.BeginArray:case a.TokenType.BeginObject:if(d===m.ElementSeen)throw new l.FracturedJsonError("Comma missing while processing array",o.InputPosition);const s=this.ParseItem(e);d=m.ElementSeen,p=Math.max(p,s.Complexity+1),r&&(s.PrefixComment=r.Value,r=void 0),c.push(s),n=s,i=e.Current.InputPosition.Row;break;default:throw new l.FracturedJsonError("Unexpected token in array",o.InputPosition)}}const y=new o.JsonItem;return y.Type=s.JsonItemType.Array,y.InputPosition=t,y.Complexity=p,y.Children=c,y}ParseObject(e){if(e.Current.Type!==a.TokenType.BeginObject)throw new l.FracturedJsonError("Parser logic error",e.Current.InputPosition);const t=e.Current.InputPosition,n=[];let r,i,c,m=-1,f=[],p=[],y=!1,g=d.BeforePropName,b=0,T=!1;for(;!T;){const o=h.GetNextTokenOrThrow(e,t),s=m!==o.InputPosition.Row,A=o.Type===a.TokenType.EndObject,C=o.Type===a.TokenType.String&&g===d.AfterComma,w=c&&(o.Type===a.TokenType.BlockComment||o.Type===a.TokenType.LineComment);if(r&&i&&(s||A||C||w)){let e;C&&y&&!s&&(e=c,c=void 0),h.AttachObjectValuePieces(n,r,i,m,f,p,c),b=Math.max(b,i.Complexity+1),r=void 0,i=void 0,f=[],p=[],c=void 0,e&&f.push(e)}switch(o.Type){case a.TokenType.BlankLine:if(!this.Options.PreserveBlankLines)break;if(g===d.AfterPropName||g===d.AfterColon)break;n.push(...f),f=[],n.push(this.ParseSimple(o));break;case a.TokenType.BlockComment:case a.TokenType.LineComment:if(this.Options.CommentPolicy===u.CommentPolicy.Remove)break;if(this.Options.CommentPolicy===u.CommentPolicy.TreatAsError)throw new l.FracturedJsonError("Comments not allowed with current options",o.InputPosition);g!==d.BeforePropName&&r?g===d.AfterPropName||g===d.AfterColon?p.push(o):(c=this.ParseSimple(o),y=g===d.AfterComma):f.push(this.ParseSimple(o));break;case a.TokenType.EndObject:if(g===d.AfterPropName||g===d.AfterColon)throw new l.FracturedJsonError("Unexpected end of object",o.InputPosition);T=!0;break;case a.TokenType.String:if(g===d.BeforePropName||g===d.AfterComma)r=o,g=d.AfterPropName;else{if(g!==d.AfterColon)throw new l.FracturedJsonError("Unexpected string found while processing object",o.InputPosition);i=this.ParseItem(e),m=e.Current.InputPosition.Row,g=d.AfterPropValue}break;case a.TokenType.False:case a.TokenType.True:case a.TokenType.Null:case a.TokenType.Number:case a.TokenType.BeginArray:case a.TokenType.BeginObject:if(g!==d.AfterColon)throw new l.FracturedJsonError("Unexpected element while processing object",o.InputPosition);i=this.ParseItem(e),m=e.Current.InputPosition.Row,g=d.AfterPropValue;break;case a.TokenType.Colon:if(g!==d.AfterPropName)throw new l.FracturedJsonError("Unexpected colon while processing object",o.InputPosition);g=d.AfterColon;break;case a.TokenType.Comma:if(g!==d.AfterPropValue)throw new l.FracturedJsonError("Unexpected comma while processing object",o.InputPosition);g=d.AfterComma;break;default:throw new l.FracturedJsonError("Unexpected token while processing object",o.InputPosition)}}if(!this.Options.AllowTrailingCommas&&g===d.AfterComma)throw new l.FracturedJsonError("Object may not end with comma with current options",e.Current.InputPosition);const A=new o.JsonItem;return A.Type=s.JsonItemType.Object,A.InputPosition=t,A.Complexity=b,A.Children=n,A}static ItemTypeFromTokenType(e){switch(e.Type){case a.TokenType.False:return s.JsonItemType.False;case a.TokenType.True:return s.JsonItemType.True;case a.TokenType.Null:return s.JsonItemType.Null;case a.TokenType.Number:return s.JsonItemType.Number;case a.TokenType.String:return s.JsonItemType.String;case a.TokenType.BlankLine:return s.JsonItemType.BlankLine;case a.TokenType.BlockComment:return s.JsonItemType.BlockComment;case a.TokenType.LineComment:return s.JsonItemType.LineComment;default:throw new l.FracturedJsonError("Unexpected Token",e.InputPosition)}}static GetNextTokenOrThrow(e,t){if(!e.MoveNext())throw new l.FracturedJsonError("Unexpected end of input while processing array or object starting",t);return e.Current}static IsMultilineComment(e){return e.Type===s.JsonItemType.BlockComment&&e.Value.includes("\n")}static AttachObjectValuePieces(e,t,n,r,i,o,l){if(n.Name=t.Text,o.length>0){let e="";for(let t=0;t<o.length;++t)e+=o[t].Text,(t<o.length-1||o[t].Type===a.TokenType.LineComment)&&(e+="\n");n.MiddleComment=e}if(i.length>0){const t=i.pop();t.Type===s.JsonItemType.BlockComment&&t.InputPosition.Row===n.InputPosition.Row?(n.PrefixComment=t.Value,e.push(...i)):(e.push(...i),e.push(t))}e.push(n),l&&(this.IsMultilineComment(l)||l.InputPosition.Row!==r?e.push(l):(n.PostfixComment=l.Value,n.IsPostCommentLineStyle=l.Type===s.JsonItemType.LineComment))}}var m,d;t.Parser=h,function(e){e[e.EmptyCollection=0]="EmptyCollection",e[e.ElementSeen=1]="ElementSeen",e[e.CommaSeen=2]="CommaSeen"}(m||(m={})),function(e){e[e.BeforePropName=0]="BeforePropName",e[e.AfterPropName=1]="AfterPropName",e[e.AfterColon=2]="AfterColon",e[e.AfterPropValue=3]="AfterPropValue",e[e.AfterComma=4]="AfterComma"}(d||(d={}))},8286:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScannerState=void 0;const r=n(955);t.ScannerState=class{constructor(e){this.CurrentPosition={Index:0,Row:0,Column:0},this.TokenPosition={Index:0,Row:0,Column:0},this.NonWhitespaceSinceLastNewline=!1,this._originalText=e}Advance(e){if(this.CurrentPosition.Index>=i)throw new Error("Maximum document length exceeded");this.CurrentPosition.Index+=1,this.CurrentPosition.Column+=1,this.NonWhitespaceSinceLastNewline||(this.NonWhitespaceSinceLastNewline=!e)}NewLine(){if(this.CurrentPosition.Index>=i)throw new Error("Maximum document length exceeded");this.CurrentPosition.Index+=1,this.CurrentPosition.Row+=1,this.CurrentPosition.Column=0,this.NonWhitespaceSinceLastNewline=!1}SetTokenStart(){this.TokenPosition=Object.assign({},this.CurrentPosition)}MakeTokenFromBuffer(e,t=!1){const n=this._originalText.substring(this.TokenPosition.Index,this.CurrentPosition.Index);return{Type:e,Text:t?n.trimEnd():n,InputPosition:Object.assign({},this.TokenPosition)}}MakeToken(e,t){return{Type:e,Text:t,InputPosition:Object.assign({},this.TokenPosition)}}Current(){return this.AtEnd()?NaN:this._originalText.charCodeAt(this.CurrentPosition.Index)}AtEnd(){return this.CurrentPosition.Index>=this._originalText.length}Throw(e){throw new r.FracturedJsonError(e,this.CurrentPosition)}};const i=2e9},3714:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StringJoinBuffer=void 0;t.StringJoinBuffer=class{constructor(e){this._lineBuff=[],this._docBuff=[],this._trimTrailingWhitespace=e}Add(...e){return this._lineBuff.push(...e),this}EndLine(e){return this.AddLineToWriter(e),this}Flush(){return this.AddLineToWriter(""),this}AsString(){return this._docBuff.join("")}AddLineToWriter(e){if(0===this._lineBuff.length&&0===e.length)return;let t=this._lineBuff.join("");this._trimTrailingWhitespace&&(t=t.trimEnd()),this._docBuff.push(t+e),this._lineBuff=[]}}},4375:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TableTemplate=void 0;const r=n(3144),i=n(4368),o=n(8975);class s{constructor(e,t){this.LocationInParent=void 0,this.Type=r.JsonItemType.Null,this.IsRowDataCompatible=!0,this.RowCount=0,this.NameLength=0,this.SimpleValueLength=0,this.PrefixCommentLength=0,this.MiddleCommentLength=0,this.PostfixCommentLength=0,this.PadType=i.BracketPaddingType.Simple,this.AllowNumberNormalization=!1,this.IsNumberList=!1,this.CompositeValueLength=0,this.TotalLength=0,this.Children=[],this._maxDigBeforeDecRaw=0,this._maxDigAfterDecRaw=0,this._maxDigBeforeDecNorm=0,this._maxDigAfterDecNorm=0,this._pads=e,this._numberListAlignment=t,this.AllowNumberNormalization=t===o.NumberListAlignment.Normalize,this.IsNumberList=!0}MeasureTableRoot(e){for(const t of e.Children)this.MeasureRowSegment(t);this.PruneAndRecompute(Number.MAX_VALUE),this.IsRowDataCompatible&&(this.IsRowDataCompatible=this.RowCount>=2)}TryToFit(e){for(let t=this.GetTemplateComplexity();t>=0;--t){if(this.TotalLength<=e)return!0;this.PruneAndRecompute(t-1)}return!1}FormatNumber(e,t){const n=this._numberListAlignment!==o.NumberListAlignment.Normalize||this.AllowNumberNormalization?this._numberListAlignment:o.NumberListAlignment.Left;switch(n){case o.NumberListAlignment.Left:return void e.Add(t.Value,this._pads.Spaces(this.SimpleValueLength-t.ValueLength));case o.NumberListAlignment.Right:return void e.Add(this._pads.Spaces(this.SimpleValueLength-t.ValueLength),t.Value)}let i,a,l,u,c,h;if(n===o.NumberListAlignment.Normalize){if(t.Type===r.JsonItemType.Null)return void e.Add(this._pads.Spaces(this._maxDigBeforeDecNorm-t.ValueLength),t.Value,this._pads.Spaces(this.CompositeValueLength-this._maxDigBeforeDecNorm));i=this._maxDigBeforeDecNorm,a=this._maxDigAfterDecNorm;l=Number(t.Value).toFixed(a),u=l.length}else i=this._maxDigBeforeDecRaw,a=this._maxDigAfterDecRaw,l=t.Value,u=t.ValueLength;const m=l.search(s._dotOrE);m>0?(c=i-m,h=this.CompositeValueLength-c-u):(c=i-u,h=this.CompositeValueLength-i),e.Add(this._pads.Spaces(c),l,this._pads.Spaces(h))}MeasureRowSegment(e){if(e.Type!==r.JsonItemType.BlankLine&&e.Type!==r.JsonItemType.BlockComment&&e.Type!==r.JsonItemType.LineComment&&(e.Type===r.JsonItemType.False||e.Type===r.JsonItemType.True?(this.IsRowDataCompatible&&(this.IsRowDataCompatible=this.Type===r.JsonItemType.True||this.Type===r.JsonItemType.Null),this.Type=r.JsonItemType.True,this.IsNumberList=!1):e.Type===r.JsonItemType.Number?(this.IsRowDataCompatible&&(this.IsRowDataCompatible=this.Type===r.JsonItemType.Number||this.Type===r.JsonItemType.Null),this.Type=r.JsonItemType.Number):e.Type===r.JsonItemType.Null?(this._maxDigBeforeDecNorm=Math.max(this._maxDigBeforeDecNorm,this._pads.LiteralNullLen),this._maxDigBeforeDecRaw=Math.max(this._maxDigBeforeDecRaw,this._pads.LiteralNullLen)):(this.IsRowDataCompatible&&(this.IsRowDataCompatible=this.Type===e.Type||this.Type===r.JsonItemType.Null),this.Type===r.JsonItemType.Null&&(this.Type=e.Type),this.IsNumberList=!1),this.IsRowDataCompatible&&(this.IsRowDataCompatible=!e.RequiresMultipleLines),this.RowCount+=1,this.NameLength=Math.max(this.NameLength,e.NameLength),this.SimpleValueLength=Math.max(this.SimpleValueLength,e.ValueLength),this.MiddleCommentLength=Math.max(this.MiddleCommentLength,e.MiddleCommentLength),this.PrefixCommentLength=Math.max(this.PrefixCommentLength,e.PrefixCommentLength),this.PostfixCommentLength=Math.max(this.PostfixCommentLength,e.PostfixCommentLength),e.Complexity>=2&&(this.PadType=i.BracketPaddingType.Complex),this.IsRowDataCompatible)){if(e.Type===r.JsonItemType.Array)for(let t=0;t<e.Children.length;++t)this.Children.length<=t&&this.Children.push(new s(this._pads,this._numberListAlignment)),this.Children[t].MeasureRowSegment(e.Children[t]);else if(e.Type===r.JsonItemType.Object){if(this.ContainsDuplicateKeys(e.Children))return void(this.IsRowDataCompatible=!1);for(const t of e.Children){let e=this.Children.find((e=>e.LocationInParent===t.Name));e||(e=new s(this._pads,this._numberListAlignment),e.LocationInParent=t.Name,this.Children.push(e)),e.MeasureRowSegment(t)}}else if(e.Type===r.JsonItemType.Number&&this.IsNumberList){const t=15,n=Number(e.Value),r=n.toString();this.AllowNumberNormalization&&(this.AllowNumberNormalization=!isNaN(n)&&n!==1/0&&n!==-1/0&&r.length<=t&&r.indexOf("e")<0&&(0!==n||s._trulyZeroValString.test(e.Value)));const i=r.indexOf(".");this._maxDigBeforeDecNorm=Math.max(this._maxDigBeforeDecNorm,i>=0?i:r.length),this._maxDigAfterDecNorm=Math.max(this._maxDigAfterDecNorm,i>=0?r.length-i-1:0);const o=e.Value.search(s._dotOrE);this._maxDigBeforeDecRaw=Math.max(this._maxDigBeforeDecRaw,o>=0?o:e.ValueLength),this._maxDigAfterDecRaw=Math.max(this._maxDigAfterDecRaw,o>=0?e.ValueLength-o-1:0)}this.AllowNumberNormalization&&(this.AllowNumberNormalization=this.IsNumberList)}}PruneAndRecompute(e){(e<=0||!this.IsRowDataCompatible)&&(this.Children=[]);for(const t of this.Children)t.PruneAndRecompute(e-1);if(this.IsNumberList)this.CompositeValueLength=this.GetNumberFieldWidth();else if(this.Children.length>0){const e=this.Children.map((e=>e.TotalLength)).reduce(((e,t)=>e+t));this.CompositeValueLength=e+Math.max(0,this._pads.CommaLen*(this.Children.length-1))+this._pads.ArrStartLen(this.PadType)+this._pads.ArrEndLen(this.PadType)}else this.CompositeValueLength=this.SimpleValueLength;this.TotalLength=(this.PrefixCommentLength>0?this.PrefixCommentLength+this._pads.CommentLen:0)+(this.NameLength>0?this.NameLength+this._pads.ColonLen:0)+(this.MiddleCommentLength>0?this.MiddleCommentLength+this._pads.CommentLen:0)+this.CompositeValueLength+(this.PostfixCommentLength>0?this.PostfixCommentLength+this._pads.CommentLen:0)}GetTemplateComplexity(){if(0===this.Children.length)return 0;const e=this.Children.map((e=>e.GetTemplateComplexity()));return 1+Math.max(...e)}ContainsDuplicateKeys(e){const t=e.map((e=>e.Name));return t.some(((e,n)=>t.indexOf(e)!==n))}GetNumberFieldWidth(){if(this._numberListAlignment===o.NumberListAlignment.Normalize&&this.AllowNumberNormalization){const e=this._maxDigAfterDecNorm>0?1:0;return this._maxDigBeforeDecNorm+e+this._maxDigAfterDecNorm}if(this._numberListAlignment===o.NumberListAlignment.Decimal){const e=this._maxDigAfterDecRaw>0?1:0;return this._maxDigBeforeDecRaw+e+this._maxDigAfterDecRaw}return this.SimpleValueLength}}t.TableTemplate=s,s._trulyZeroValString=new RegExp("^-?[0.]+([eE].*)?$"),s._dotOrE=new RegExp("[.eE]")},1490:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenEnumerator=void 0;const r=n(955);t.TokenEnumerator=class{constructor(e){this._generator=e}get Current(){if(!this._current)throw new r.FracturedJsonError("Illegal enumerator usage");return this._current}MoveNext(){const e=this._generator.next();return this._current=e.value,!e.done}}},4843:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenGenerator=void 0;const r=n(8286),i=n(6628);function o(e,t,n){e.SetTokenStart();const r=e.MakeToken(n,t);return e.Advance(!1),r}function s(e,t,n){e.SetTokenStart();for(let i=1;i<t.length;++i)e.AtEnd()&&e.Throw("Unexpected end of input while processing keyword"),e.Advance(!1),e.Current()!==t.charCodeAt(i)&&e.Throw("Unexpected keyword");const r=e.MakeToken(n,t);return e.Advance(!1),r}function a(e){e.SetTokenStart(),e.AtEnd()&&e.Throw("Unexpected end of input while processing comment"),e.Advance(!1);let t=!1;e.Current()===p?t=!0:e.Current()!==f&&e.Throw("Bad character for start of comment"),e.Advance(!1);let n=!1;for(;;){if(e.AtEnd()){if(!t)return e.MakeTokenFromBuffer(i.TokenType.LineComment,!0);e.Throw("Unexpected end of input while processing comment")}const r=e.Current();if(r!==h){if(e.Advance(!1),r===f&&n)return e.MakeTokenFromBuffer(i.TokenType.BlockComment);n=r===p}else if(e.NewLine(),!t)return e.MakeTokenFromBuffer(i.TokenType.LineComment,!0)}}function l(e){e.SetTokenStart(),e.Advance(!1);let t=!1,n=0;for(;;){e.AtEnd()&&e.Throw("Unexpected end of input while processing string");const o=e.Current();if(n>0)(r=o)>=N&&r<=x||r>=S&&r<=j||r>=k&&r<=M||e.Throw("Bad unicode escape in string"),n-=1,e.Advance(!1);else if(t)R(o)||e.Throw("Bad escaped character in string"),o===B&&(n=4),t=!1,e.Advance(!1);else{if(z(o)&&e.Throw("Control characters are not allowed in strings"),e.Advance(!1),o===g)return e.MakeTokenFromBuffer(i.TokenType.String);o===y&&(t=!0)}}var r}function u(e){e.SetTokenStart();let t=V.Beginning;for(;;){const n=e.Current();let r=U.ValidAndConsumed;switch(t){case V.Beginning:n===_?t=V.PastLeadingSign:n===N?t=V.PastWhole:J(n)?t=V.PastFirstDigitOfWhole:r=U.InvalidatesToken;break;case V.PastLeadingSign:J(n)?t=n===N?V.PastWhole:V.PastFirstDigitOfWhole:r=U.InvalidatesToken;break;case V.PastFirstDigitOfWhole:n===P?t=V.PastDecimalPoint:n===I||n===E?t=V.PastE:J(n)||(r=U.StartOfNewToken);break;case V.PastWhole:n===P?t=V.PastDecimalPoint:n===I||n===E?t=V.PastE:r=U.StartOfNewToken;break;case V.PastDecimalPoint:J(n)?t=V.PastFirstDigitOfFractional:r=U.InvalidatesToken;break;case V.PastFirstDigitOfFractional:n===I||n===E?t=V.PastE:J(n)||(r=U.StartOfNewToken);break;case V.PastE:n===L||n===_?t=V.PastExpSign:J(n)?t=V.PastFirstDigitOfExponent:r=U.InvalidatesToken;break;case V.PastExpSign:J(n)?t=V.PastFirstDigitOfExponent:r=U.InvalidatesToken;break;case V.PastFirstDigitOfExponent:J(n)||(r=U.StartOfNewToken)}if(r===U.InvalidatesToken&&e.Throw("Bad character while processing number"),r===U.StartOfNewToken)return e.MakeTokenFromBuffer(i.TokenType.Number);if(e.AtEnd())switch(t){case V.PastFirstDigitOfWhole:case V.PastWhole:case V.PastFirstDigitOfFractional:case V.PastFirstDigitOfExponent:return e.MakeTokenFromBuffer(i.TokenType.Number);default:e.Throw("Unexpected end of input while processing number")}else e.Advance(!1)}}t.TokenGenerator=function*(e){const t=new r.ScannerState(e);for(;;){if(t.AtEnd())return;const e=t.Current();switch(e){case c:case d:case m:t.Advance(!0);break;case h:t.NonWhitespaceSinceLastNewline||(yield t.MakeToken(i.TokenType.BlankLine,"\n")),t.NewLine(),t.SetTokenStart();break;case b:yield o(t,"{",i.TokenType.BeginObject);break;case T:yield o(t,"}",i.TokenType.EndObject);break;case A:yield o(t,"[",i.TokenType.BeginArray);break;case C:yield o(t,"]",i.TokenType.EndArray);break;case w:yield o(t,":",i.TokenType.Colon);break;case v:yield o(t,",",i.TokenType.Comma);break;case D:yield s(t,"true",i.TokenType.True);break;case j:yield s(t,"false",i.TokenType.False);break;case $:yield s(t,"null",i.TokenType.Null);break;case f:yield a(t);break;case g:yield l(t);break;case _:yield u(t);break;default:J(e)||t.Throw("Unexpected character"),yield u(t)}}};const c=" ".charCodeAt(0),h="\n".charCodeAt(0),m="\r".charCodeAt(0),d="\t".charCodeAt(0),f="/".charCodeAt(0),p="*".charCodeAt(0),y="\\".charCodeAt(0),g='"'.charCodeAt(0),b="{".charCodeAt(0),T="}".charCodeAt(0),A="[".charCodeAt(0),C="]".charCodeAt(0),w=":".charCodeAt(0),v=",".charCodeAt(0),L="+".charCodeAt(0),_="-".charCodeAt(0),P=".".charCodeAt(0),N="0".charCodeAt(0),x="9".charCodeAt(0),S="a".charCodeAt(0),k="A".charCodeAt(0),O="b".charCodeAt(0),I="e".charCodeAt(0),E="E".charCodeAt(0),j="f".charCodeAt(0),M="F".charCodeAt(0),$="n".charCodeAt(0),F="r".charCodeAt(0),D="t".charCodeAt(0),B="u".charCodeAt(0);function J(e){return e>=N&&e<=x}function R(e){switch(e){case g:case y:case f:case O:case j:case $:case F:case D:case B:return!0;default:return!1}}function z(e){return e>=0&&e<=31||127===e||e>=128&&e<=159}var V,U;!function(e){e[e.Beginning=0]="Beginning",e[e.PastLeadingSign=1]="PastLeadingSign",e[e.PastFirstDigitOfWhole=2]="PastFirstDigitOfWhole",e[e.PastWhole=3]="PastWhole",e[e.PastDecimalPoint=4]="PastDecimalPoint",e[e.PastFirstDigitOfFractional=5]="PastFirstDigitOfFractional",e[e.PastE=6]="PastE",e[e.PastExpSign=7]="PastExpSign",e[e.PastFirstDigitOfExponent=8]="PastFirstDigitOfExponent"}(V||(V={})),function(e){e[e.InvalidatesToken=0]="InvalidatesToken",e[e.ValidAndConsumed=1]="ValidAndConsumed",e[e.StartOfNewToken=2]="StartOfNewToken"}(U||(U={}))},6628:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenType=void 0,function(e){e[e.Invalid=0]="Invalid",e[e.BeginArray=1]="BeginArray",e[e.EndArray=2]="EndArray",e[e.BeginObject=3]="BeginObject",e[e.EndObject=4]="EndObject",e[e.String=5]="String",e[e.Number=6]="Number",e[e.Null=7]="Null",e[e.True=8]="True",e[e.False=9]="False",e[e.BlockComment=10]="BlockComment",e[e.LineComment=11]="LineComment",e[e.BlankLine=12]="BlankLine",e[e.Comma=13]="Comma",e[e.Colon=14]="Colon"}(t.TokenType||(t.TokenType={}))},945:(e,t,n)=>{t.ZA=void 0;var r=n(8787);var i=n(9330);var o=n(7584);var s=n(8975);var a=n(955);var l=n(5123);Object.defineProperty(t,"ZA",{enumerable:!0,get:function(){return l.Formatter}})},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var r=n(6540);const i={},o=r.createContext(i);function s(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);